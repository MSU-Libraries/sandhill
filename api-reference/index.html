
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../evaluate-conditions/">
      
      
      
      <link rel="icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>API Reference - Sandhill Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a40c8224.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sandhill-api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Sandhill Documentation" class="md-header__button md-logo" aria-label="Sandhill Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sandhill Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/MSU-Libraries/sandhill" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    MSU-Libraries/sandhill
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Sandhill Documentation" class="md-nav__button md-logo" aria-label="Sandhill Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Sandhill Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/MSU-Libraries/sandhill" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    MSU-Libraries/sandhill
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to Sandhill
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../instance-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Instance Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developing-your-instance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developing Your Instance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Service Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../functional-testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functional Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../development-guidelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development Guidelines
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../routes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Routes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data-processors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Processors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Template Filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bootstrap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bootstrap Process
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../evaluate-conditions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluate Conditions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#routes" class="md-nav__link">
    <span class="md-ellipsis">
      Routes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.routes.static" class="md-nav__link">
    <span class="md-ellipsis">
      static
    </span>
  </a>
  
    <nav class="md-nav" aria-label="static">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.routes.static.favicon" class="md-nav__link">
    <span class="md-ellipsis">
      favicon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.routes.static.handle_static" class="md-nav__link">
    <span class="md-ellipsis">
      handle_static
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.routes.error" class="md-nav__link">
    <span class="md-ellipsis">
      error
    </span>
  </a>
  
    <nav class="md-nav" aria-label="error">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.routes.error.handle_http_abort" class="md-nav__link">
    <span class="md-ellipsis">
      handle_http_abort
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.routes.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
    <nav class="md-nav" aria-label="main">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.routes.main.add_routes" class="md-nav__link">
    <span class="md-ellipsis">
      add_routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.routes.main.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-processors" class="md-nav__link">
    <span class="md-ellipsis">
      Data Processors
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils" class="md-nav__link">
    <span class="md-ellipsis">
      Utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.api" class="md-nav__link">
    <span class="md-ellipsis">
      api
    </span>
  </a>
  
    <nav class="md-nav" aria-label="api">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.api.api_get" class="md-nav__link">
    <span class="md-ellipsis">
      api_get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.api.api_get_multi" class="md-nav__link">
    <span class="md-ellipsis">
      api_get_multi
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.api.establish_url" class="md-nav__link">
    <span class="md-ellipsis">
      establish_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.config_loader" class="md-nav__link">
    <span class="md-ellipsis">
      config_loader
    </span>
  </a>
  
    <nav class="md-nav" aria-label="config_loader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.config_loader.get_all_routes" class="md-nav__link">
    <span class="md-ellipsis">
      get_all_routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.config_loader.load_json_config" class="md-nav__link">
    <span class="md-ellipsis">
      load_json_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.config_loader.load_json_configs" class="md-nav__link">
    <span class="md-ellipsis">
      load_json_configs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.config_loader.load_route_config" class="md-nav__link">
    <span class="md-ellipsis">
      load_route_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.config_loader.load_routes_from_configs" class="md-nav__link">
    <span class="md-ellipsis">
      load_routes_from_configs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.context" class="md-nav__link">
    <span class="md-ellipsis">
      context
    </span>
  </a>
  
    <nav class="md-nav" aria-label="context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.context.app_context" class="md-nav__link">
    <span class="md-ellipsis">
      app_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.context.context_processors" class="md-nav__link">
    <span class="md-ellipsis">
      context_processors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.context.list_custom_context_processors" class="md-nav__link">
    <span class="md-ellipsis">
      list_custom_context_processors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.error_handling" class="md-nav__link">
    <span class="md-ellipsis">
      error_handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="error_handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.error_handling.catch" class="md-nav__link">
    <span class="md-ellipsis">
      catch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.error_handling.dp_abort" class="md-nav__link">
    <span class="md-ellipsis">
      dp_abort
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.generic" class="md-nav__link">
    <span class="md-ellipsis">
      generic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="generic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.getconfig" class="md-nav__link">
    <span class="md-ellipsis">
      getconfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.getdescendant" class="md-nav__link">
    <span class="md-ellipsis">
      getdescendant
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.getindex" class="md-nav__link">
    <span class="md-ellipsis">
      getindex
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.getmodulepath" class="md-nav__link">
    <span class="md-ellipsis">
      getmodulepath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.ifnone" class="md-nav__link">
    <span class="md-ellipsis">
      ifnone
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.overlay_dicts_matching_key" class="md-nav__link">
    <span class="md-ellipsis">
      overlay_dicts_matching_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.pop_dict_matching_key" class="md-nav__link">
    <span class="md-ellipsis">
      pop_dict_matching_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.recursive_merge" class="md-nav__link">
    <span class="md-ellipsis">
      recursive_merge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.tolist" class="md-nav__link">
    <span class="md-ellipsis">
      tolist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.tolistfromkeys" class="md-nav__link">
    <span class="md-ellipsis">
      tolistfromkeys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.touniquelist" class="md-nav__link">
    <span class="md-ellipsis">
      touniquelist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilshtmlhtmltagfilter" class="md-nav__link">
    <span class="md-ellipsis">
      utils.html.HTMLTagFilter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath" class="md-nav__link">
    <span class="md-ellipsis">
      jsonpath
    </span>
  </a>
  
    <nav class="md-nav" aria-label="jsonpath">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath.json_from_url" class="md-nav__link">
    <span class="md-ellipsis">
      json_from_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath.find" class="md-nav__link">
    <span class="md-ellipsis">
      find
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath.put" class="md-nav__link">
    <span class="md-ellipsis">
      put
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath.append" class="md-nav__link">
    <span class="md-ellipsis">
      append
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath.delete" class="md-nav__link">
    <span class="md-ellipsis">
      delete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath.eval_within" class="md-nav__link">
    <span class="md-ellipsis">
      eval_within
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.request" class="md-nav__link">
    <span class="md-ellipsis">
      request
    </span>
  </a>
  
    <nav class="md-nav" aria-label="request">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.request.match_request_format" class="md-nav__link">
    <span class="md-ellipsis">
      match_request_format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.request.overlay_with_query_args" class="md-nav__link">
    <span class="md-ellipsis">
      overlay_with_query_args
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilssolrsolr" class="md-nav__link">
    <span class="md-ellipsis">
      utils.solr.Solr
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.template" class="md-nav__link">
    <span class="md-ellipsis">
      template
    </span>
  </a>
  
    <nav class="md-nav" aria-label="template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.template.evaluate_conditions" class="md-nav__link">
    <span class="md-ellipsis">
      evaluate_conditions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.template.render_template_json" class="md-nav__link">
    <span class="md-ellipsis">
      render_template_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.template.render_template_string" class="md-nav__link">
    <span class="md-ellipsis">
      render_template_string
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.test" class="md-nav__link">
    <span class="md-ellipsis">
      test
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.xml" class="md-nav__link">
    <span class="md-ellipsis">
      xml
    </span>
  </a>
  
    <nav class="md-nav" aria-label="xml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.xml.load" class="md-nav__link">
    <span class="md-ellipsis">
      load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.xml.xpath" class="md-nav__link">
    <span class="md-ellipsis">
      xpath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.xml.xpath_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      xpath_by_id
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      Bootstrap
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bootstrap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bootstrap_1" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bootstraprequest" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap.request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bootstrapg" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap.g
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bootstrapdebugtoolbar" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap.debugtoolbar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bootstrapdisable_debug_caching" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap.disable_debug_caching
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.bootstrap.disable_debug_caching.disable_browser_cache" class="md-nav__link">
    <span class="md-ellipsis">
      disable_browser_cache
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#routes" class="md-nav__link">
    <span class="md-ellipsis">
      Routes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.routes.static" class="md-nav__link">
    <span class="md-ellipsis">
      static
    </span>
  </a>
  
    <nav class="md-nav" aria-label="static">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.routes.static.favicon" class="md-nav__link">
    <span class="md-ellipsis">
      favicon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.routes.static.handle_static" class="md-nav__link">
    <span class="md-ellipsis">
      handle_static
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.routes.error" class="md-nav__link">
    <span class="md-ellipsis">
      error
    </span>
  </a>
  
    <nav class="md-nav" aria-label="error">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.routes.error.handle_http_abort" class="md-nav__link">
    <span class="md-ellipsis">
      handle_http_abort
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.routes.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
    <nav class="md-nav" aria-label="main">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.routes.main.add_routes" class="md-nav__link">
    <span class="md-ellipsis">
      add_routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.routes.main.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-processors" class="md-nav__link">
    <span class="md-ellipsis">
      Data Processors
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils" class="md-nav__link">
    <span class="md-ellipsis">
      Utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.api" class="md-nav__link">
    <span class="md-ellipsis">
      api
    </span>
  </a>
  
    <nav class="md-nav" aria-label="api">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.api.api_get" class="md-nav__link">
    <span class="md-ellipsis">
      api_get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.api.api_get_multi" class="md-nav__link">
    <span class="md-ellipsis">
      api_get_multi
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.api.establish_url" class="md-nav__link">
    <span class="md-ellipsis">
      establish_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.config_loader" class="md-nav__link">
    <span class="md-ellipsis">
      config_loader
    </span>
  </a>
  
    <nav class="md-nav" aria-label="config_loader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.config_loader.get_all_routes" class="md-nav__link">
    <span class="md-ellipsis">
      get_all_routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.config_loader.load_json_config" class="md-nav__link">
    <span class="md-ellipsis">
      load_json_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.config_loader.load_json_configs" class="md-nav__link">
    <span class="md-ellipsis">
      load_json_configs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.config_loader.load_route_config" class="md-nav__link">
    <span class="md-ellipsis">
      load_route_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.config_loader.load_routes_from_configs" class="md-nav__link">
    <span class="md-ellipsis">
      load_routes_from_configs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.context" class="md-nav__link">
    <span class="md-ellipsis">
      context
    </span>
  </a>
  
    <nav class="md-nav" aria-label="context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.context.app_context" class="md-nav__link">
    <span class="md-ellipsis">
      app_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.context.context_processors" class="md-nav__link">
    <span class="md-ellipsis">
      context_processors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.context.list_custom_context_processors" class="md-nav__link">
    <span class="md-ellipsis">
      list_custom_context_processors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.error_handling" class="md-nav__link">
    <span class="md-ellipsis">
      error_handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="error_handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.error_handling.catch" class="md-nav__link">
    <span class="md-ellipsis">
      catch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.error_handling.dp_abort" class="md-nav__link">
    <span class="md-ellipsis">
      dp_abort
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.generic" class="md-nav__link">
    <span class="md-ellipsis">
      generic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="generic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.getconfig" class="md-nav__link">
    <span class="md-ellipsis">
      getconfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.getdescendant" class="md-nav__link">
    <span class="md-ellipsis">
      getdescendant
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.getindex" class="md-nav__link">
    <span class="md-ellipsis">
      getindex
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.getmodulepath" class="md-nav__link">
    <span class="md-ellipsis">
      getmodulepath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.ifnone" class="md-nav__link">
    <span class="md-ellipsis">
      ifnone
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.overlay_dicts_matching_key" class="md-nav__link">
    <span class="md-ellipsis">
      overlay_dicts_matching_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.pop_dict_matching_key" class="md-nav__link">
    <span class="md-ellipsis">
      pop_dict_matching_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.recursive_merge" class="md-nav__link">
    <span class="md-ellipsis">
      recursive_merge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.tolist" class="md-nav__link">
    <span class="md-ellipsis">
      tolist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.tolistfromkeys" class="md-nav__link">
    <span class="md-ellipsis">
      tolistfromkeys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.generic.touniquelist" class="md-nav__link">
    <span class="md-ellipsis">
      touniquelist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilshtmlhtmltagfilter" class="md-nav__link">
    <span class="md-ellipsis">
      utils.html.HTMLTagFilter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath" class="md-nav__link">
    <span class="md-ellipsis">
      jsonpath
    </span>
  </a>
  
    <nav class="md-nav" aria-label="jsonpath">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath.json_from_url" class="md-nav__link">
    <span class="md-ellipsis">
      json_from_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath.find" class="md-nav__link">
    <span class="md-ellipsis">
      find
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath.put" class="md-nav__link">
    <span class="md-ellipsis">
      put
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath.append" class="md-nav__link">
    <span class="md-ellipsis">
      append
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath.delete" class="md-nav__link">
    <span class="md-ellipsis">
      delete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.jsonpath.eval_within" class="md-nav__link">
    <span class="md-ellipsis">
      eval_within
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.request" class="md-nav__link">
    <span class="md-ellipsis">
      request
    </span>
  </a>
  
    <nav class="md-nav" aria-label="request">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.request.match_request_format" class="md-nav__link">
    <span class="md-ellipsis">
      match_request_format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.request.overlay_with_query_args" class="md-nav__link">
    <span class="md-ellipsis">
      overlay_with_query_args
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilssolrsolr" class="md-nav__link">
    <span class="md-ellipsis">
      utils.solr.Solr
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.template" class="md-nav__link">
    <span class="md-ellipsis">
      template
    </span>
  </a>
  
    <nav class="md-nav" aria-label="template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.template.evaluate_conditions" class="md-nav__link">
    <span class="md-ellipsis">
      evaluate_conditions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.template.render_template_json" class="md-nav__link">
    <span class="md-ellipsis">
      render_template_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.template.render_template_string" class="md-nav__link">
    <span class="md-ellipsis">
      render_template_string
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.test" class="md-nav__link">
    <span class="md-ellipsis">
      test
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.utils.xml" class="md-nav__link">
    <span class="md-ellipsis">
      xml
    </span>
  </a>
  
    <nav class="md-nav" aria-label="xml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.xml.load" class="md-nav__link">
    <span class="md-ellipsis">
      load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.xml.xpath" class="md-nav__link">
    <span class="md-ellipsis">
      xpath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandhill.utils.xml.xpath_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      xpath_by_id
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      Bootstrap
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bootstrap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bootstrap_1" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bootstraprequest" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap.request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bootstrapg" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap.g
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bootstrapdebugtoolbar" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap.debugtoolbar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bootstrapdisable_debug_caching" class="md-nav__link">
    <span class="md-ellipsis">
      bootstrap.disable_debug_caching
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sandhill.bootstrap.disable_debug_caching.disable_browser_cache" class="md-nav__link">
    <span class="md-ellipsis">
      disable_browser_cache
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="sandhill-api-reference">Sandhill API Reference</h1>
<p>This document provides API reference for Sandhill code not covered
by the user documentation. If you plan on developing
additional data processors, filters, or the like, this may be
useful. Otherwise, you can safely ignore these documentation pages.</p>
<h2 id="routes">Routes</h2>
<p>Core routing API should not be needed even when developing new
functionality for your instance. Still, it's provided here for
the curious.</p>


<div class="doc doc-object doc-module">



<h2 id="sandhill.routes.static" class="doc doc-heading">
            <code>sandhill.routes.static</code>


</h2>

    <div class="doc doc-contents first">

      <p>Sandhill overrides/additions to the  default Flask <code>/static</code> route.</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sandhill.routes.static.favicon" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">favicon</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Wrapper to calling handle_static for the ever popular favicon file. </p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>file stream</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The favicon.ico file stream from inside <code>/static</code> </p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="HTTPException" optional>HTTPException</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>On HTTP error</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/routes/static.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/favicon.ico&#39;</span><span class="p">)</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="k">def</span><span class="w"> </span><span class="nf">favicon</span><span class="p">():</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">    Wrapper to calling handle_static for the ever popular favicon file. \n</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">        (file stream): The favicon.ico file stream from inside `/static` \n</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">        HTTPException: On HTTP error \n</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>    <span class="k">return</span> <span class="n">handle_static</span><span class="p">(</span><span class="s1">&#39;favicon.ico&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.routes.static.handle_static" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handle_static</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Replacement for the default Flask <code>/static</code> path handler.     Retrieves the requested static file by first looking for it inside     the <code>instance/static/</code> directory. If the file is not found, this     method will then look for the file in the core <code>sandhill/static/</code>     directory. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>filename</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The requested file path within <code>/static</code> </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>file stream</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File stream of the file object </p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="HTTPException" optional>HTTPException</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>On HTTP error</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/routes/static.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/static/&lt;path:filename&gt;&#39;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;static&#39;</span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="k">def</span><span class="w"> </span><span class="nf">handle_static</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="sd">    Replacement for the default Flask `/static` path handler. \</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="sd">    Retrieves the requested static file by first looking for it inside \</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">    the `instance/static/` directory. If the file is not found, this \</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">    method will then look for the file in the core `sandhill/static/` \</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">    directory. \n</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">        filename (str): The requested file path within `/static` \n</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="sd">        (file stream): File stream of the file object \n</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">        HTTPException: On HTTP error \n</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>    <span class="c1"># Return from instance/static/ if available</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>    <span class="n">static_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">instance_path</span><span class="p">,</span> <span class="s2">&quot;static&quot;</span><span class="p">)</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>    <span class="c1"># Fall back to sandhill/static/</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">static_path</span><span class="p">,</span> <span class="n">filename</span><span class="p">)):</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>        <span class="n">static_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span> <span class="s2">&quot;static&quot;</span><span class="p">)</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>    <span class="n">cache_timeout</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">get_send_file_max_age</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>    <span class="k">return</span> <span class="n">send_from_directory</span><span class="p">(</span><span class="n">static_path</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">max_age</span><span class="o">=</span><span class="n">cache_timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="sandhill.routes.error" class="doc doc-heading">
            <code>sandhill.routes.error</code>


</h2>

    <div class="doc doc-contents first">

      <p>Sandhill HTTP error handling</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sandhill.routes.error.handle_http_abort" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handle_http_abort</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Overrides the default Flask template for abort codes. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>exc</code></td>
            <td>
                  <code><autoref identifier="werkzeug.exceptions.HTTPException" optional hover>HTTPException</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A HTTPException from a 4xx or 5xx HTTP code </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="flask.Response" optional hover>Response</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Flask error response</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/routes/error.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="nd">@app</span><span class="o">.</span><span class="n">errorhandler</span><span class="p">(</span><span class="n">HTTPException</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="k">def</span><span class="w"> </span><span class="nf">handle_http_abort</span><span class="p">(</span><span class="n">exc</span><span class="p">):</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="sd">    Overrides the default Flask template for abort codes. \n</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">        exc (werkzeug.exceptions.HTTPException): A HTTPException from a 4xx or 5xx HTTP code \n</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">        (flask.Response): The Flask error response \n</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>    <span class="c1"># Check if the request accepts json format, if so prefer that for rendering</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>    <span class="n">request_format</span> <span class="o">=</span> <span class="n">match_request_format</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;application/json&quot;</span><span class="p">,</span> <span class="s2">&quot;text/html&quot;</span><span class="p">])</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>    <span class="k">if</span> <span class="n">request_format</span> <span class="o">==</span> <span class="s2">&quot;application/json&quot;</span><span class="p">:</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>        <span class="n">exc_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">exc</span><span class="o">.</span><span class="n">description</span><span class="p">}</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">exc_dict</span><span class="p">),</span> <span class="n">exc</span><span class="o">.</span><span class="n">code</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>    <span class="c1"># Otherwise return html</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s2">&quot;abort.html.j2&quot;</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="n">exc</span><span class="p">),</span> <span class="n">exc</span><span class="o">.</span><span class="n">code</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="sandhill.routes.main" class="doc doc-heading">
            <code>sandhill.routes.main</code>


</h2>

    <div class="doc doc-contents first">

      <p>The main route provides the entry point for Sandhill, loading and adding routes.</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sandhill.routes.main.add_routes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_routes</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Decorator function that adds all routes to the Flask app based     on JSON route configs loaded from <code>instance/configs/routes/</code>.</p>

            <details class="quote">
              <summary>Source code in <code>sandhill/routes/main.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="k">def</span><span class="w"> </span><span class="nf">add_routes</span><span class="p">():</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">    Decorator function that adds all routes to the Flask app based \</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">    on JSON route configs loaded from `instance/configs/routes/`. \n</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>    <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Processing routes.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>        <span class="n">all_routes</span> <span class="o">=</span> <span class="n">get_all_routes</span><span class="p">()</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>        <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loading routes: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">route</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">route</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">all_routes</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>        <span class="k">for</span> <span class="n">route</span> <span class="ow">in</span> <span class="n">all_routes</span><span class="p">:</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>            <span class="n">endpoint</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;endpoint&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>            <span class="n">options</span><span class="p">[</span><span class="s1">&#39;methods&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">route</span><span class="o">.</span><span class="n">methods</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>            <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>                <span class="sa">f</span><span class="s2">&quot;Adding URL rule: </span><span class="si">{</span><span class="n">route</span><span class="o">.</span><span class="n">rule</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">func</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">options</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>            <span class="p">)</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>            <span class="n">app</span><span class="o">.</span><span class="n">add_url_rule</span><span class="p">(</span><span class="n">route</span><span class="o">.</span><span class="n">rule</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>        <span class="k">return</span> <span class="n">func</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>    <span class="k">return</span> <span class="n">decorator</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.routes.main.main" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Entry point for the whole Sandhill application, handling all routes and     determining if a route has output to respond with after all processing     is completed. </p>
<p>Based on the route_config that the path matches to, it will load all the     required data processors before rendering the result. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>*args</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unused </p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>**kwargs</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unused </p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A valid response for Flask to render out, or raises HTTP 500</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/routes/main.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="nd">@add_routes</span><span class="p">()</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="c1"># pylint: disable=unused-argument</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">    Entry point for the whole Sandhill application, handling all routes and \</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">    determining if a route has output to respond with after all processing \</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    is completed. \n</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">    Based on the route_config that the path matches to, it will load all the \</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    required data processors before rendering the result. \n</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">        *args: Unused \n</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">        **kwargs: Unused \n</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">        A valid response for Flask to render out, or raises HTTP 500 \n</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>    <span class="n">route_used</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">url_rule</span><span class="o">.</span><span class="n">rule</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span class="c1">## loop over all the configs in the instance dir looking at the &quot;route&quot;</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>    <span class="c1">## field to determine which configs to use</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="n">route_config</span> <span class="o">=</span> <span class="n">load_route_config</span><span class="p">(</span><span class="n">route_used</span><span class="p">)</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>    <span class="c1">## process and load data routes</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="n">route_data</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>    <span class="c1">## if &#39;template&#39; is in the route_config, append the template processor</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>    <span class="c1">## to handle legacy configs</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>    <span class="k">if</span> <span class="s1">&#39;template&#39;</span> <span class="ow">in</span> <span class="n">route_config</span><span class="p">:</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>        <span class="k">if</span> <span class="s1">&#39;data&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">route_config</span><span class="p">:</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>            <span class="n">route_config</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>        <span class="n">route_config</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>            <span class="p">{</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>                <span class="s1">&#39;processor&#39;</span><span class="p">:</span> <span class="s1">&#39;template.render&#39;</span><span class="p">,</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>                <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="n">route_config</span><span class="p">[</span><span class="s1">&#39;template&#39;</span><span class="p">],</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;_template_render&#39;</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>            <span class="p">})</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>    <span class="n">route_rules</span> <span class="o">=</span> <span class="n">tolistfromkeys</span><span class="p">(</span><span class="n">route_config</span><span class="p">,</span> <span class="s1">&#39;route&#39;</span><span class="p">,</span> <span class="s1">&#39;routes&#39;</span><span class="p">)</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>    <span class="k">if</span> <span class="s1">&#39;data&#39;</span> <span class="ow">in</span> <span class="n">route_config</span><span class="p">:</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">entry</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">route_config</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]):</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>            <span class="k">if</span> <span class="s1">&#39;name&#39;</span> <span class="ow">in</span> <span class="n">entry</span> <span class="ow">and</span> <span class="s1">&#39;processor&#39;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>                <span class="n">route_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>                <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unable to parse route data entry number </span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2"> &quot;</span> \
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>                                   <span class="sa">f</span><span class="s2">&quot;for: </span><span class="si">{</span><span class="mi">1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">route_rules</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">load_route_data</span><span class="p">(</span><span class="n">route_data</span><span class="p">)</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span class="c1"># check if none of the route processors returned a FlaskResponse</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="n">FlaskResponse</span><span class="p">,</span> <span class="n">WerkzeugReponse</span><span class="p">)):</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>        <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>            <span class="sa">f</span><span class="s2">&quot;None of the &#39;data&#39; processors in </span><span class="si">{</span><span class="n">route_rules</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>            <span class="sa">f</span><span class="s2">&quot; returned a Response object&quot;</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>        <span class="p">)</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>        <span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>            <span class="n">abort</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="data-processors">Data Processors</h2>
<p>Sandhill routes are composed of a list of <strong>data processors</strong>. These are single
actions that Sandhill may take while processing a request. See the
<a href="../data-processors/">data processor</a> documentation for full details.</p>
<h2 id="utils">Utils</h2>
<p>Utilities are bits of helper code used elsewhere in Sandhill. Functions or
classes in <code>utils/</code> may be useful in writing instance specific code for your
Sandhill site.</p>


<div class="doc doc-object doc-module">



<h2 id="sandhill.utils.api" class="doc doc-heading">
            <code>sandhill.utils.api</code>


</h2>

    <div class="doc doc-contents first">

      <p>Functionality to support API calls.</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.api.api_get" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">api_get</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Perform an API call using <code>requests.get()</code> and return the response object. This function adds     logging surrounding the call. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>**kwargs</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Arguments to <a href="#sandhill.utils.api.api_get--TODO"><code>requests.get()</code></a> </p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="requests.RequestException" optional hover>RequestException</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the call cannot return a response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="k">def</span><span class="w"> </span><span class="nf">api_get</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="sd">    Perform an API call using `requests.get()` and return the response object. This function adds \</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">    logging surrounding the call. \n</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">        **kwargs (dict): Arguments to [`requests.get()`](#TODO) \n</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">        requests.RequestException: If the call cannot return a response. \n</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>    <span class="k">if</span> <span class="s2">&quot;timeout&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;timeout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>    <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API GET arguments: </span><span class="si">{</span><span class="n">kwargs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>   <span class="c1"># pylint: disable=missing-timeout</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>    <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API GET called: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>        <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>            <span class="sa">f</span><span class="s2">&quot;API GET call returned </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>        <span class="p">)</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>    <span class="k">return</span> <span class="n">response</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.api.api_get_multi" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">api_get_multi</span><span class="p">(</span><span class="n">requests_kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Perform multiple API calls in parellel using futures, returning a list     of responses. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>requests_kwargs</code></td>
            <td>
                  <code>list of dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Each arguments to [<code>requests.get()</code>] </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A generator yielding response future objects. Call object.result() to unwrap.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="k">def</span><span class="w"> </span><span class="nf">api_get_multi</span><span class="p">(</span><span class="n">requests_kwargs</span><span class="p">):</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">    Perform multiple API calls in parellel using futures, returning a list \</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">    of responses. \n</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">        requests_kwargs (list of dict): Each arguments to [`requests.get()`] \n</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">        A generator yielding response future objects. Call object.result() to unwrap. \n</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">request_futures</span><span class="p">(</span><span class="n">requests_kwargs</span><span class="p">):</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>        <span class="n">futures</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>        <span class="k">with</span> <span class="n">FuturesSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>            <span class="k">for</span> <span class="n">kwargs</span> <span class="ow">in</span> <span class="n">requests_kwargs</span><span class="p">:</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>                <span class="k">if</span> <span class="s2">&quot;timeout&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>                    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;timeout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>                <span class="n">futures</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>            <span class="k">yield from</span> <span class="n">futures</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>    <span class="k">return</span> <span class="n">request_futures</span><span class="p">(</span><span class="n">requests_kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.api.establish_url" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">establish_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">fallback</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Set URL to fallback if provided URL is none; also checks the URL validity. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>url</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A possible URL. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>fallback</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A secondary URL to fallback to if <code>url</code> is None. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="werkzeurg.exceptions.HTTPException" optional hover>HTTPException</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If URL to be returned is not a valid formatted URL.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="k">def</span><span class="w"> </span><span class="nf">establish_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">fallback</span><span class="p">):</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">    Set URL to fallback if provided URL is none; also checks the URL validity. \n</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">        url (str): A possible URL. \n</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">        fallback (str): A secondary URL to fallback to if `url` is None. \n</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">        werkzeurg.exceptions.HTTPException: If URL to be returned is not a valid formatted URL. \n</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span class="n">url</span> <span class="o">=</span> <span class="n">url</span> <span class="k">if</span> <span class="n">url</span> <span class="k">else</span> <span class="n">fallback</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>        <span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">parsed</span><span class="o">.</span><span class="n">scheme</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="p">]):</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>            <span class="k">raise</span> <span class="ne">ValueError</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>        <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;URL provided is not valid: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>        <span class="n">abort</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>    <span class="k">return</span> <span class="n">url</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="sandhill.utils.config_loader" class="doc doc-heading">
            <code>sandhill.utils.config_loader</code>


</h2>

    <div class="doc doc-contents first">

      <p>Utilities for loading of loading <code>config/</code> files.</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.config_loader.get_all_routes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_all_routes</span><span class="p">(</span><span class="n">routes_dir</span><span class="o">=</span><span class="s1">&#39;config/routes/&#39;</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Finds all routes in JSON files with within given directory and order them     according to the desired load order. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>routes_dir</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The directory to look for route configs. </p>
              </div>
            </td>
            <td>
                  <code>&#39;config/routes/&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>All of the route rules found in desired order.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/config_loader.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_all_routes</span><span class="p">(</span><span class="n">routes_dir</span><span class="o">=</span><span class="s2">&quot;config/routes/&quot;</span><span class="p">):</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">    Finds all routes in JSON files with within given directory and order them \</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">    according to the desired load order. \n</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">        routes_dir (str): The directory to look for route configs. \n</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">        (list): All of the route rules found in desired order. \n</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span class="n">routes</span> <span class="o">=</span> <span class="n">load_routes_from_configs</span><span class="p">(</span><span class="n">routes_dir</span><span class="p">)</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span class="c1"># if no routes are found, add a default one for the home page</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">routes</span><span class="p">:</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>        <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No routes loaded; will use welcome home page route.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>        <span class="n">routes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Route</span><span class="p">(</span><span class="n">rule</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">))</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="c1"># prefer most specifc path (hardcoded path over variable) in left to right manner</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span class="n">re_var</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;\w+:\w+&gt;&#39;</span><span class="p">)</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>    <span class="n">sort_routes</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span class="k">for</span> <span class="n">route</span> <span class="ow">in</span> <span class="n">routes</span><span class="p">:</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>        <span class="n">sort_routes</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">route</span><span class="p">,</span> <span class="n">re_var</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">route</span><span class="o">.</span><span class="n">rule</span><span class="p">)))</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span class="n">sort_routes</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">sort_routes</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">sort_routes</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.config_loader.load_json_config" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_json_config</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Load a JSON file. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>file_path</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The full path to the JSON file to load </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The contents of the loaded JSON file, or an empty dictionary                 upon error loading or parsing the file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/config_loader.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="nd">@catch</span><span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="s2">&quot;Unable to read json file at path: </span><span class="si">{file_path}</span><span class="s2"> Error: </span><span class="si">{exc}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>       <span class="n">return_val</span><span class="o">=</span><span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">())</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="nd">@catch</span><span class="p">(</span><span class="n">JSONDecodeError</span><span class="p">,</span> <span class="s2">&quot;Malformed json at path: </span><span class="si">{file_path}</span><span class="s2"> Error: </span><span class="si">{exc}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>       <span class="n">return_val</span><span class="o">=</span><span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">())</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="k">def</span><span class="w"> </span><span class="nf">load_json_config</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="sd">    Load a JSON file. \n</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">        file_path (str): The full path to the JSON file to load \n</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="sd">        (dict): The contents of the loaded JSON file, or an empty dictionary \</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="sd">                upon error loading or parsing the file. \n</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>    <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loading json file at </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_config_file</span><span class="p">:</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_config_file</span><span class="p">,</span> <span class="n">object_pairs_hook</span><span class="o">=</span><span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.config_loader.load_json_configs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_json_configs</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">recurse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Loads all the config files in the provided path. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>path</code></td>
            <td>
                  <code><autoref identifier="string" optional>string</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The directory path from which to load the config files. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>recurse</code></td>
            <td>
                  <code><autoref identifier="bool" optional>bool</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If set to True, does a recursive walk into the path. </p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary with keys of each file path and values of their loaded JSON.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/config_loader.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="k">def</span><span class="w"> </span><span class="nf">load_json_configs</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">recurse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="sd">    Loads all the config files in the provided path. \n</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">        path (string): The directory path from which to load the config files. \n</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">        recurse (bool): If set to True, does a recursive walk into the path. \n</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">        (dict): Dictionary with keys of each file path and values of their loaded JSON. \n</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>    <span class="n">config_files</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>        <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to load json configs; invalid directory: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>        <span class="k">for</span> <span class="n">config_file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>            <span class="k">if</span> <span class="n">config_file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.json&#39;</span><span class="p">):</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>                <span class="n">config_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">config_file</span><span class="p">)</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>                <span class="n">config_files</span><span class="p">[</span><span class="n">config_file_path</span><span class="p">]</span> <span class="o">=</span> <span class="n">load_json_config</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">)</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">recurse</span><span class="p">:</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>            <span class="k">break</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span class="k">return</span> <span class="n">config_files</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.config_loader.load_route_config" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_route_config</span><span class="p">(</span><span class="n">route_rule</span><span class="p">,</span> <span class="n">routes_dir</span><span class="o">=</span><span class="s1">&#39;config/routes/&#39;</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Return the json data for the provided directory. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>route_rule</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the route rule to match to in the json configs (the <code>route</code> key) </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>routes_dir</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the path to look for route configs. Default = config/routes/ </p>
              </div>
            </td>
            <td>
                  <code>&#39;config/routes/&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="OrderedDict" optional>OrderedDict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The loaded json of the matched route config, or empty dict if not found</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/config_loader.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="nd">@catch</span><span class="p">(</span><span class="ne">FileNotFoundError</span><span class="p">,</span> <span class="s2">&quot;Route dir not found at path </span><span class="si">{routes_dir}</span><span class="s2"> - &quot;</span> \
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>       <span class="s2">&quot;creating welcome home page route. Error: </span><span class="si">{exc}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>       <span class="n">return_val</span><span class="o">=</span><span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">({</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>           <span class="s2">&quot;route&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;/&quot;</span><span class="p">],</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>           <span class="s2">&quot;template&quot;</span><span class="p">:</span> <span class="s2">&quot;home.html.j2&quot;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>       <span class="p">}))</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="k">def</span><span class="w"> </span><span class="nf">load_route_config</span><span class="p">(</span><span class="n">route_rule</span><span class="p">,</span> <span class="n">routes_dir</span><span class="o">=</span><span class="s2">&quot;config/routes/&quot;</span><span class="p">):</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">    Return the json data for the provided directory. \n</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="sd">        route_rule (str): the route rule to match to in the json configs (the `route` key) \n</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="sd">        routes_dir (str): the path to look for route configs. Default = config/routes/ \n</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="sd">        (OrderedDict): The loaded json of the matched route config, or empty dict if not found \n</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>    <span class="n">route_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">instance_path</span><span class="p">,</span> <span class="n">routes_dir</span><span class="p">)</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">()</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>    <span class="n">conf_files</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">route_path</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">route_path</span><span class="p">)</span> <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.json&quot;</span><span class="p">)</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>    <span class="p">]</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>    <span class="k">for</span> <span class="n">conf_file</span> <span class="ow">in</span> <span class="n">conf_files</span><span class="p">:</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>        <span class="n">check_data</span> <span class="o">=</span> <span class="n">load_json_config</span><span class="p">(</span><span class="n">conf_file</span><span class="p">)</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="k">if</span> <span class="n">route_rule</span> <span class="ow">in</span> <span class="n">tolistfromkeys</span><span class="p">(</span><span class="n">check_data</span><span class="p">,</span> <span class="s2">&quot;route&quot;</span><span class="p">,</span> <span class="s2">&quot;routes&quot;</span><span class="p">):</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">check_data</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>            <span class="k">break</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.config_loader.load_routes_from_configs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_routes_from_configs</span><span class="p">(</span><span class="n">routes_dir</span><span class="o">=</span><span class="s1">&#39;config/routes/&#39;</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Given a path relative to the <code>instance/</code> dir, load all JSON files within     and extract the "route" keys. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>routes_dir</code></td>
            <td>
                  <code><autoref identifier="string" optional>string</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The relative path to the JSON files </p>
              </div>
            </td>
            <td>
                  <code>&#39;config/routes/&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of routes from the configs</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/config_loader.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="nd">@catch</span><span class="p">(</span><span class="ne">FileNotFoundError</span><span class="p">,</span> <span class="s2">&quot;Route dir not found at path </span><span class="si">{routes_dir}</span><span class="s2"> Error: </span><span class="si">{exc}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">return_val</span><span class="o">=</span><span class="p">[])</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="k">def</span><span class="w"> </span><span class="nf">load_routes_from_configs</span><span class="p">(</span><span class="n">routes_dir</span><span class="o">=</span><span class="s2">&quot;config/routes/&quot;</span><span class="p">):</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">    Given a path relative to the `instance/` dir, load all JSON files within \</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    and extract the &quot;route&quot; keys. \n</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">        routes_dir (string): The relative path to the JSON files \n</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">        (list): A list of routes from the configs \n</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>    <span class="n">route_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">instance_path</span><span class="p">,</span> <span class="n">routes_dir</span><span class="p">)</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>    <span class="n">routes</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>    <span class="n">conf_files</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">route_path</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">route_path</span><span class="p">)</span> <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.json&quot;</span><span class="p">)</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span class="p">]</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>    <span class="k">for</span> <span class="n">conf_file</span> <span class="ow">in</span> <span class="n">conf_files</span><span class="p">:</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">load_json_config</span><span class="p">(</span><span class="n">conf_file</span><span class="p">)</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>        <span class="n">r_rules</span> <span class="o">=</span> <span class="n">tolist</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;route&quot;</span><span class="p">,</span> <span class="s2">&quot;routes&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">])</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>        <span class="n">methods</span> <span class="o">=</span> <span class="n">tolist</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;method&quot;</span><span class="p">,</span> <span class="s2">&quot;methods&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">])</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">r_rules</span><span class="p">:</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>            <span class="n">routes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Route</span><span class="p">(</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>                <span class="n">rule</span><span class="o">=</span><span class="n">rule</span><span class="p">,</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>                <span class="n">methods</span><span class="o">=</span><span class="n">methods</span><span class="p">,</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>            <span class="p">))</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>    <span class="k">return</span> <span class="n">routes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="sandhill.utils.context" class="doc doc-heading">
            <code>sandhill.utils.context</code>


</h2>

    <div class="doc doc-contents first">

      <p>Context related functionality</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.context.app_context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">app_context</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Create a flask app context if not already present.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a># Example use
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>with context.app_context():
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    ...
</code></pre></div>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A context manager class instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="k">def</span><span class="w"> </span><span class="nf">app_context</span><span class="p">():</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">    Create a flask app context if not already present.\n</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">    ```</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">    # Example use</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">    with context.app_context():</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">        ...</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">    ``` \n</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="sd">        A context manager class instance. \n</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>    <span class="k">class</span><span class="w"> </span><span class="nc">NullContext</span><span class="p">:</span> <span class="c1"># pylint: disable=all</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>        <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>        <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span> <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">has_app_context</span><span class="p">()</span> <span class="k">else</span> <span class="n">NullContext</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.context.context_processors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">context_processors</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>The list of  Sandhill context processor functions. </p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Context processors mapped as: name =&gt; function</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="nd">@app</span><span class="o">.</span><span class="n">context_processor</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="k">def</span><span class="w"> </span><span class="nf">context_processors</span><span class="p">():</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">    The list of  Sandhill context processor functions. \n</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">        (dict): Context processors mapped as: name =&gt; function \n</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="c1"># TODO move function definitions to sandhill/context/ and import them for use below</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">day</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">        Wrapper around datetime.strftime with default yyyy-mm-dd format \n</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">        args:</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">            fmt (str): The format for the date to return \n</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">            day (str): A date in yyyy-mm-dd format to format, or today if not passed \n</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">        returns:</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">            (str): The formatted date \n</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>        <span class="n">fmt</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">fmt</span> <span class="k">else</span> <span class="n">fmt</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>        <span class="n">day</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">day</span> <span class="k">else</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">day</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>        <span class="k">return</span> <span class="n">day</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">context_sandbug</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="sd">        Sandbug as a context processor, because we can. Will output the given \</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">        value into the logs. For debugging. \n</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="sd">            value (Any): The value to debug. \n</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="sd">            comment (str): Additional comment to add to log output. \n</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="sd">            (None): Sandbug does not return a value. \n</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>        <span class="n">sandbug</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">comment</span><span class="p">)</span> <span class="c1"># pylint: disable=undefined-variable</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">urlcomponents</span><span class="p">():</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="sd">        Creates a deepcopy of the url components part of the request object. \n</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="sd">            (dict): The copied data. \n</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>            <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>                <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">),</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>                <span class="s2">&quot;full_path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">full_path</span><span class="p">),</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>                <span class="s2">&quot;base_url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">base_url</span><span class="p">),</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>                <span class="s2">&quot;url_root&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">url_root</span><span class="p">),</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>                <span class="s2">&quot;query_args&quot;</span><span class="p">:</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">query_args</span><span class="p">),</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>                <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">host</span><span class="p">)</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>            <span class="p">}</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>        <span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>            <span class="n">abort</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">find_mismatches</span><span class="p">(</span><span class="n">dict1</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">dict2</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="sd">        Return detailed info about how and where the two supplied dicts don&#39;t match. \n</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="sd">            dict1 (dict): A dictionary to compare. \n</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="sd">            dict2 (dict): A dictionary to compare. \n</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="sd">            (dict) A dictionary highlighting what is different between the two inputs. \n</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">DeepDiff</span><span class="p">(</span><span class="n">dict1</span><span class="p">,</span> <span class="n">dict2</span><span class="p">,</span> <span class="n">ignore_order</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span class="nd">@pass_context</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_var</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="sd">        Returns the given variable in the current application context \n</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="sd">            var (str): The name of the variable to get from the context \n</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">            (any): The value of the provided variable in the current context \n</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>        <span class="n">ctx</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>        <span class="k">return</span> <span class="n">ctx</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">ctx</span> <span class="k">else</span> <span class="kc">None</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>    <span class="c1"># Mapping of context function names to actual functions</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>    <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>        <span class="s1">&#39;debug&#39;</span><span class="p">:</span> <span class="n">app</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>        <span class="s1">&#39;strftime&#39;</span><span class="p">:</span> <span class="n">strftime</span><span class="p">,</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>        <span class="s1">&#39;sandbug&#39;</span><span class="p">:</span> <span class="n">context_sandbug</span><span class="p">,</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>        <span class="s1">&#39;urlcomponents&#39;</span><span class="p">:</span> <span class="n">urlcomponents</span><span class="p">,</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span class="s1">&#39;find_mismatches&#39;</span><span class="p">:</span> <span class="n">find_mismatches</span><span class="p">,</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>        <span class="s1">&#39;get_var&#39;</span><span class="p">:</span> <span class="n">get_var</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.context.list_custom_context_processors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_custom_context_processors</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Get the full list of the available custom context processors. </p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of strings of the context processor names.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="k">def</span><span class="w"> </span><span class="nf">list_custom_context_processors</span><span class="p">():</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="sd">    Get the full list of the available custom context processors. \n</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">        (list): A list of strings of the context processor names. \n</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>    <span class="n">custom</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>    <span class="k">for</span> <span class="n">entries</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">template_context_processors</span><span class="p">[</span><span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>        <span class="n">ctx_procs</span> <span class="o">=</span> <span class="n">entries</span><span class="p">()</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">ctx_procs</span><span class="p">:</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;request&#39;</span><span class="p">,</span> <span class="s1">&#39;session&#39;</span><span class="p">]:</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>                <span class="n">custom</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>    <span class="k">return</span> <span class="n">custom</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="sandhill.utils.error_handling" class="doc doc-heading">
            <code>sandhill.utils.error_handling</code>


</h2>

    <div class="doc doc-contents first">

      <p>Methods to help handle errors</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.error_handling.catch" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">catch</span><span class="p">(</span><span class="n">exc_class</span><span class="p">,</span> <span class="n">exc_msg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Decorator to catch general exceptions and handle in a standarized manor. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>exc_class</code></td>
            <td>
                  <code><autoref identifier="Exception" optional>Exception</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of exception to catch </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>exc_msg</code></td>
            <td>
                  <code>String) (optional</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message to log; the             parameter <code>{exc}</code> is available in the string template.</p>
<p>Ex: <code>f"Error: {exc}"</code> </p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>**kwargs</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional arguments:</p>
<p>return_val (Any): Value to return after the exception has been handled</p>
<p>return_arg (str): Function kwarg to be returned after the exception has been handled</p>
<p>abort (int): Status code to abort with </p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="typing.Any" optional hover>Any</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Only if return_val or return_arg is provided in kwargs. </p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="HTTPException" optional>HTTPException</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no return_val or return_arg is provided in kwargs. </p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Examples:
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">@catch</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="s2">&quot;Some error message&quot;</span><span class="p">,</span> <span class="n">return_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">def</span><span class="w"> </span><span class="nf">myfunc</span><span class="p">():</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="o">...</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nd">@catch</span><span class="p">((</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">),</span> <span class="s2">&quot;Some error message&quot;</span><span class="p">,</span> <span class="n">return_arg</span><span class="o">=</span><span class="s1">&#39;myval&#39;</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">def</span><span class="w"> </span><span class="nf">myfunc</span><span class="p">(</span><span class="n">myval</span><span class="p">):</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="o">...</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/error_handling.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="k">def</span><span class="w"> </span><span class="nf">catch</span><span class="p">(</span><span class="n">exc_class</span><span class="p">,</span> <span class="n">exc_msg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="sd">    Decorator to catch general exceptions and handle in a standarized manor. \n</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">        exc_class (Exception): Type of exception to catch \n</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">        exc_msg (String) (optional): Message to log; the \</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="sd">            parameter `{exc}` is available in the string template.\n</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="sd">            Ex: `f&quot;Error: {exc}&quot;` \n</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">        **kwargs: Optional arguments:\n</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">            return_val (Any): Value to return after the exception has been handled\n</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">            return_arg (str): Function kwarg to be returned after the exception has been handled\n</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">            abort (int): Status code to abort with \n</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">        (Any): Only if return_val or return_arg is provided in kwargs. \n</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">        (HTTPException): If no return_val or return_arg is provided in kwargs. \n</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">    @catch(KeyError, &quot;Some error message&quot;, return_val=None)</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">    def myfunc():</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">        ...</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="sd">    @catch((KeyError, IndexError), &quot;Some error message&quot;, return_arg=&#39;myval&#39;)</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">    def myfunc(myval):</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">        ...</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="sd">    ``` \n</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inner</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">func_kwargs</span><span class="p">):</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>                <span class="n">rval</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">func_kwargs</span><span class="p">)</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>            <span class="k">except</span> <span class="n">exc_class</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>                <span class="c1"># Re-map the function arguments to their variable name</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>                <span class="c1"># for use in formatted error message string</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>                <span class="n">args_dict</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">_get_func_params</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="p">),</span> <span class="o">**</span><span class="n">func_kwargs</span><span class="p">}</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>                <span class="n">args_dict</span><span class="p">[</span><span class="s1">&#39;exc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exc</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>                <span class="c1"># Handling of the exception</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>                <span class="k">if</span> <span class="n">exc_msg</span><span class="p">:</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>                    <span class="n">sandhill</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2"> raised: &quot;</span> <span class="o">+</span> \
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>                        <span class="n">exc_msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">args_dict</span><span class="p">))</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>                <span class="c1"># Get the return_arg value if required and present in the function&#39;s arguments</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>                <span class="n">return_arg</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>                <span class="k">if</span> <span class="s1">&#39;return_arg&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>                    <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;return_arg&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;return_arg&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">args_dict</span><span class="p">:</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>                        <span class="n">return_arg</span> <span class="o">=</span> <span class="n">args_dict</span><span class="p">[</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;return_arg&#39;</span><span class="p">)]</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>                <span class="c1"># Abort if specified</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>                <span class="k">if</span> <span class="s1">&#39;abort&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>                    <span class="n">abort</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;abort&#39;</span><span class="p">))</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>                <span class="c1"># If no return_val specified, we&#39;ll re-raise the error</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>                <span class="k">if</span> <span class="s1">&#39;return_val&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="s1">&#39;return_arg&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>                    <span class="k">raise</span> <span class="n">exc</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>                <span class="n">rval</span> <span class="o">=</span> <span class="n">return_arg</span> <span class="k">if</span> <span class="n">return_arg</span> <span class="k">else</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;return_val&#39;</span><span class="p">)</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>            <span class="k">return</span> <span class="n">rval</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span class="k">return</span> <span class="n">wrapper</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>    <span class="k">return</span> <span class="n">inner</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.error_handling.dp_abort" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dp_abort</span><span class="p">(</span><span class="n">http_code</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Data processor abort. Will abort with the given status code if     the data processor has an <code>on_fail</code> key set and the value is <code>0</code>. </p>
<p>If the value is non-<code>0</code>, the 'on_fail' code will override     the passed code. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>http_code</code></td>
            <td>
                  <code><autoref identifier="int" optional>int</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A valid HTTP status code </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="HTTPException" optional>HTTPException</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Can raises exception if data processor's <code>on_fail</code> is             defined in parent context</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/error_handling.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="k">def</span><span class="w"> </span><span class="nf">dp_abort</span><span class="p">(</span><span class="n">http_code</span><span class="p">):</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="sd">    Data processor abort. Will abort with the given status code if \</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">    the data processor has an `on_fail` key set and the value is `0`. \n</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">    If the value is non-`0`, the &#39;on_fail&#39; code will override \</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">    the passed code. \n</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">        http_code (int): A valid HTTP status code \n</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="sd">        (HTTPException): Can raises exception if data processor&#39;s `on_fail` is \</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="sd">            defined in parent context \n</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>    <span class="n">parent_locals</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_back</span><span class="o">.</span><span class="n">f_locals</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">parent_locals</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;data&#39;</span> <span class="ow">in</span> <span class="n">parent_locals</span> <span class="k">else</span> <span class="p">{}</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>    <span class="k">if</span> <span class="s1">&#39;on_fail&#39;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>        <span class="n">abort</span><span class="p">(</span><span class="n">http_code</span> <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;on_fail&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;on_fail&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="sandhill.utils.generic" class="doc doc-heading">
            <code>sandhill.utils.generic</code>


</h2>

    <div class="doc doc-contents first">

      <p>Generic functions that could be used in most any context.</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.generic.getconfig" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getconfig</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Get the value of the given config name. It will first     check in the app.config for the variable name, if not found it     will then look look in the os.environ, if still not found     it will use the default param </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>name</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the config variable to look for </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>default</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The defaut value if not found elsewhere </p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Value of the config variable, default value otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/generic.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="k">def</span><span class="w"> </span><span class="nf">getconfig</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">    Get the value of the given config name. It will first \</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="sd">    check in the app.config for the variable name, if not found it \</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="sd">    will then look look in the os.environ, if still not found \</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="sd">    it will use the default param \n</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="sd">        name (str): Name of the config variable to look for \n</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="sd">        default (str|None): The defaut value if not found elsewhere \n</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a><span class="sd">        (str): Value of the config variable, default value otherwise \n</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>    <span class="n">value</span> <span class="o">=</span> <span class="n">default</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>    <span class="c1"># XXX os.environ is loaded via bootstrap/__init__.py into app.config</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>    <span class="c1">#     between loading sandhill.default_settings.cfg and instance/sandhill.cfg</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>    <span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>        <span class="n">value</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.generic.getdescendant" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getdescendant</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">list_keys</span><span class="p">,</span> <span class="n">extract</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">put</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Gets key values from the dictionary/list if they exist; </p>
<p>will check recursively through the <code>obj</code>. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>obj</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref> | <autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dict/list to check, possibly containing nested dicts/lists. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>list_keys</code></td>
            <td>
                  <code><autoref identifier="list" optional>list</autoref> | <autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of descendants to follow (or . delimited string) </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>extract</code></td>
            <td>
                  <code><autoref identifier="bool" optional>bool</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If set to true, will remove the last matching value from the <code>obj</code>. </p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>put</code></td>
            <td>
                  <code><autoref identifier="typing.Any" optional hover>Any</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Replace the found value with this new value in the <code>obj</code>,                    or append if the found value at a list key of <code>"[]"</code> </p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="typing.Any" optional hover>Any</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The last matching value from list_keys, or None if no match </p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="IndexError" optional>IndexError</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When attempting to put a list index that is invalid. </p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Examples:
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Get &quot;key1&quot; of mydict, then index 2 of that result, then &quot;key3&quot; of that result</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">v</span> <span class="o">=</span> <span class="n">getdescendant</span><span class="p">(</span><span class="n">mydict</span><span class="p">,</span> <span class="s2">&quot;key1.2.key3&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1"># Same as above, only also remove the found item from mydict</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">v</span> <span class="o">=</span> <span class="n">getdescendant</span><span class="p">(</span><span class="n">mydict</span><span class="p">,</span> <span class="s2">&quot;key1.2.key3&quot;</span><span class="p">,</span> <span class="n">extract</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="c1"># Replace value with new value</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="n">v</span> <span class="o">=</span> <span class="n">getdescendant</span><span class="p">(</span><span class="n">mydict</span><span class="p">,</span> <span class="s2">&quot;key1.2.key3&quot;</span><span class="p">,</span> <span class="n">put</span><span class="o">=</span><span class="s2">&quot;Replacement value!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># Append to a list</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">v</span> <span class="o">=</span> <span class="n">getdescendant</span><span class="p">(</span><span class="n">mydict</span><span class="p">,</span> <span class="s2">&quot;key1.2.[]&quot;</span><span class="p">,</span> <span class="n">put</span><span class="o">=</span><span class="s2">&quot;Append this value.&quot;</span><span class="p">)</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/generic.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="nd">@catch</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="s2">&quot;Could not find </span><span class="si">{list_keys}</span><span class="s2"> in: </span><span class="si">{obj}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">return_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="k">def</span><span class="w"> </span><span class="nf">getdescendant</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">list_keys</span><span class="p">,</span> <span class="n">extract</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">put</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">    Gets key values from the dictionary/list if they exist; \n</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">    will check recursively through the `obj`. \n</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">        obj (dict|list): A dict/list to check, possibly containing nested dicts/lists. \n</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="sd">        list_keys (list|str): List of descendants to follow (or . delimited string) \n</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="sd">        extract (bool): If set to true, will remove the last matching value from the `obj`. \n</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="sd">        put (Any): Replace the found value with this new value in the `obj`, \</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="sd">                   or append if the found value at a list key of `&quot;[]&quot;` \n</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="sd">        (Any): The last matching value from list_keys, or None if no match \n</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="sd">        IndexError: When attempting to put a list index that is invalid. \n</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="sd">    # Get &quot;key1&quot; of mydict, then index 2 of that result, then &quot;key3&quot; of that result</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="sd">    v = getdescendant(mydict, &quot;key1.2.key3&quot;)</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="sd">    # Same as above, only also remove the found item from mydict</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">    v = getdescendant(mydict, &quot;key1.2.key3&quot;, extract=True)</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">    # Replace value with new value</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">    v = getdescendant(mydict, &quot;key1.2.key3&quot;, put=&quot;Replacement value!&quot;)</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="sd">    # Append to a list</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="sd">    v = getdescendant(mydict, &quot;key1.2.[]&quot;, put=&quot;Append this value.&quot;)</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">    ``` \n</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>    <span class="n">list_keys</span> <span class="o">=</span> <span class="n">list_keys</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">list_keys</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">list_keys</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">list_keys</span><span class="p">):</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>        <span class="n">pobj</span> <span class="o">=</span> <span class="n">obj</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">)</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">:</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>            <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>            <span class="n">key</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>            <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>            <span class="n">obj</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>        <span class="c1">#  This is the last key in the loop</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_keys</span><span class="p">):</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>            <span class="k">if</span> <span class="n">extract</span> <span class="ow">and</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>                <span class="k">del</span> <span class="n">pobj</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>            <span class="k">if</span> <span class="n">put</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">pobj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pobj</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>                    <span class="n">pobj</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">put</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pobj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>                    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;[]&quot;</span><span class="p">:</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>                        <span class="n">pobj</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">put</span><span class="p">)</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">key</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">pobj</span><span class="p">):</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>                        <span class="n">pobj</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">put</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>                        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Index of </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> is invalid for list: </span><span class="si">{</span><span class="n">pobj</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>    <span class="k">return</span> <span class="n">obj</span> <span class="k">if</span> <span class="n">list_keys</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.generic.getindex" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getindex</span><span class="p">(</span><span class="n">fromlist</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">default_idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">default_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Get the value from a list for a given index. If the given index     is not valid, a default index is used instead. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>fromlist</code></td>
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List in which to find indexes </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>idx</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref> | <autoref identifier="int" optional>int</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The index to find; str values allowed and cast to int </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>default_idx</code></td>
            <td>
                  <code><autoref identifier="int" optional>int</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default index to use if idx is not valid </p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>default_val</code></td>
            <td>
                  <code><autoref identifier="typing.Any" optional hover>Any</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to return if the idx and default_idx are             both invalid </p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(Any) A value from the list, or the default_val</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/generic.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="k">def</span><span class="w"> </span><span class="nf">getindex</span><span class="p">(</span><span class="n">fromlist</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="nb">int</span><span class="p">,</span> <span class="n">default_idx</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">default_val</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">    Get the value from a list for a given index. If the given index \</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="sd">    is not valid, a default index is used instead. \n</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="sd">        fromlist (list): List in which to find indexes \n</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="sd">        idx (str|int): The index to find; str values allowed and cast to int \n</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="sd">        default_idx (int): The default index to use if idx is not valid \n</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="sd">        default_val (Any): The value to return if the idx and default_idx are \</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="sd">            both invalid \n</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="sd">        (Any) A value from the list, or the default_val \n</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span class="n">idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="n">idx</span> <span class="o">=</span> <span class="n">default_idx</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="k">return</span> <span class="n">fromlist</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>        <span class="k">return</span> <span class="n">default_val</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.generic.getmodulepath" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getmodulepath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Get the Python module path for a directory or file in Sandhill </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>path</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A file or dir path in Sandhill </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>module (e.g. 'instance' or 'sandhill.filters.filters')</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/generic.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="k">def</span><span class="w"> </span><span class="nf">getmodulepath</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="sd">    Get the Python module path for a directory or file in Sandhill \n</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a><span class="sd">        path (str): A file or dir path in Sandhill \n</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="sd">        (str): module (e.g. &#39;instance&#39; or &#39;sandhill.filters.filters&#39;) \n</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>    <span class="n">install_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">root_path</span><span class="p">)</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>    <span class="n">subpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">install_path</span><span class="p">)</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>    <span class="k">return</span> <span class="n">subpath</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s1">&#39;.py&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.generic.ifnone" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ifnone</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Returns the default value if the key is not in the dictionary or if     a non-dictionary is provided it will return the default if it is not set. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>*args</code></td>
            <td>
                  <code><autoref identifier="typing.Any" optional hover>Any</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>With 3 args:</p>
<div class="highlight"><pre><span></span><code>var (dict): The dictionary to check

key (str): The key of the dictionary

default_value (Any): Return val if key is not in var
</code></pre></div>
<p>With 2 args:</p>
<div class="highlight"><pre><span></span><code>var (Any): The variable to check

default_value (Any): Return val if the variable is None
</code></pre></div>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(Any) The default_value if the value is None or the key is not in the dict. </p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="TypeError" optional>TypeError</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If invalid number of arguments passed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/generic.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="k">def</span><span class="w"> </span><span class="nf">ifnone</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="sd">    Returns the default value if the key is not in the dictionary or if \</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="sd">    a non-dictionary is provided it will return the default if it is not set. \n</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">        *args (Any):</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">            With 3 args:\n</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">                var (dict): The dictionary to check\n</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">                key (str): The key of the dictionary\n</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">                default_value (Any): Return val if key is not in var\n</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="sd">            With 2 args:\n</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="sd">                var (Any): The variable to check\n</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">                default_value (Any): Return val if the variable is None\n</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="sd">        (Any) The default_value if the value is None or the key is not in the dict. \n</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="sd">        (TypeError): If invalid number of arguments passed. \n</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>    <span class="n">var</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">args</span> <span class="k">else</span> <span class="kc">None</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>            <span class="sa">f</span><span class="s2">&quot;ifnone() missing required positional argument (2 or 3) </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="si">}</span><span class="s2"> received.&quot;</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>        <span class="p">)</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>        <span class="n">key</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>        <span class="n">default_val</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>        <span class="k">return</span> <span class="n">var</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">var</span> <span class="k">else</span> <span class="n">default_val</span> <span class="c1"># pylint: disable=unsupported-membership-test,unsubscriptable-object</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>    <span class="c1"># len(args) == 2</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>    <span class="n">default_value</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>    <span class="k">return</span> <span class="n">var</span> <span class="k">if</span> <span class="n">var</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">default_value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.generic.overlay_dicts_matching_key" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">overlay_dicts_matching_key</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="n">overlays</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="n">key</span><span class="p">:</span> <span class="n">Hashable</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Given the target, find and replace matching dicts, for all matching dicts     in the list of overlays, using the value for the provided key to compare them. </p>
<p>For each overlay dict, overlay the values on top of any matching original     dict from the target. </p>
<p>If multiple overlays match an original target dict, both overlays will use     the original dict as a base for the overlay. </p>
<p>If no matching dict was found in the original target list, the overlay will be     appended to the target as is. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>target</code></td>
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The list of dicts to search and update. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>overlays</code></td>
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The list of dict match and overlay. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>key</code></td>
            <td>
                  <code><autoref identifier="collections.abc.Hashable" optional hover>Hashable</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The key (both dicts) for the comparison value.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/generic.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-215" name="__codelineno-0-215"></a><span class="k">def</span><span class="w"> </span><span class="nf">overlay_dicts_matching_key</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="n">overlays</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="n">key</span><span class="p">:</span> <span class="n">Hashable</span><span class="p">):</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a><span class="sd">    Given the target, find and replace matching dicts, for all matching dicts \</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="sd">    in the list of overlays, using the value for the provided key to compare them. \n</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><span class="sd">    For each overlay dict, overlay the values on top of any matching original \</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="sd">    dict from the target. \n</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="sd">    If multiple overlays match an original target dict, both overlays will use \</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="sd">    the original dict as a base for the overlay. \n</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="sd">    If no matching dict was found in the original target list, the overlay will be \</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a><span class="sd">    appended to the target as is. \n</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><span class="sd">        target (list): The list of dicts to search and update. \n</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="sd">        overlays (list): The list of dict match and overlay. \n</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="sd">        key (Hashable): The key (both dicts) for the comparison value. \n</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>    <span class="n">base_ref</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>    <span class="c1"># Extract all base/default dictionaries from target</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>    <span class="k">for</span> <span class="n">overlay</span> <span class="ow">in</span> <span class="n">overlays</span><span class="p">:</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">oval</span> <span class="o">:=</span> <span class="n">overlay</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)):</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>            <span class="k">if</span> <span class="p">[</span><span class="n">base_dict</span> <span class="o">:=</span> <span class="n">tdict</span> <span class="k">for</span> <span class="n">tdict</span> <span class="ow">in</span> <span class="n">target</span> <span class="k">if</span> <span class="n">tdict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">oval</span><span class="p">]:</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>                <span class="n">target</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">base_dict</span><span class="p">)</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>                <span class="n">base_ref</span><span class="p">[</span><span class="n">oval</span><span class="p">]</span> <span class="o">=</span> <span class="n">base_dict</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>    <span class="c1"># For each overlay, copy matching base and update with overlay before appending</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>    <span class="k">for</span> <span class="n">overlay</span> <span class="ow">in</span> <span class="n">overlays</span><span class="p">:</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">base_dict</span> <span class="o">:=</span> <span class="n">base_ref</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">overlay</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">))):</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>            <span class="n">overlay</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">base_dict</span><span class="p">,</span> <span class="o">**</span><span class="n">overlay</span><span class="p">}</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>        <span class="n">target</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">overlay</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.generic.pop_dict_matching_key" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pop_dict_matching_key</span><span class="p">(</span><span class="n">haystack</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="n">match</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Hashable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Search the haystack for all dicts that have the same     value as the passed match dict for the given key. </p>
<p>Matched dicts are removed from the haystack and     returned as a list. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>haystack</code></td>
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of dicts to search through. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>match</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The dict to match against. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>key</code></td>
            <td>
                  <code><autoref identifier="collections.abc.Hashable" optional hover>Hashable</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The key (both dicts) for the comparison value. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of matching dicts removed from the haystack.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/generic.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="k">def</span><span class="w"> </span><span class="nf">pop_dict_matching_key</span><span class="p">(</span><span class="n">haystack</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="n">match</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Hashable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">    Search the haystack for all dicts that have the same \</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">    value as the passed match dict for the given key. \n</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="sd">    Matched dicts are removed from the haystack and \</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">    returned as a list. \n</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="sd">        haystack (list): A list of dicts to search through. \n</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">        match (dict): The dict to match against. \n</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="sd">        key (Hashable): The key (both dicts) for the comparison value. \n</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="sd">        (list): A list of matching dicts removed from the haystack. \n</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>    <span class="n">matched</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">needle_val</span> <span class="o">:=</span> <span class="n">match</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)):</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>        <span class="k">for</span> <span class="n">hay</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">haystack</span><span class="p">):</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>            <span class="k">if</span> <span class="n">hay</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">needle_val</span><span class="p">:</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>                <span class="n">matched</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hay</span><span class="p">)</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>                <span class="n">haystack</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">hay</span><span class="p">)</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>    <span class="k">return</span> <span class="n">matched</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.generic.recursive_merge" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">recursive_merge</span><span class="p">(</span><span class="n">dict1</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">dict2</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">sanity</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Given 2 dictionaries, merge them together, overriding dict1     values by dict2 if existing in both.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>dict1</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Base dictionary, keys will be overridden if the keys are in both. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>dict2</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prioritized dictionary, keys will be kept if the keys are in both. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sanity</code></td>
            <td>
                  <code><autoref identifier="int" optional>int</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The depth to reach before raising an error. </p>
              </div>
            </td>
            <td>
                  <code>100</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dict1 and dict2 merged</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="RecursionError" optional>RecursionError</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if dictionary depth reaches sanity</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="TypeError" optional>TypeError</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dict1 and dict2 needs to be dictionaries, sanity needs to be an integer</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/generic.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="k">def</span><span class="w"> </span><span class="nf">recursive_merge</span><span class="p">(</span><span class="n">dict1</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">dict2</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">sanity</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="sd">    Given 2 dictionaries, merge them together, overriding dict1 \</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="sd">    values by dict2 if existing in both.\n</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="sd">        dict1 (dict): Base dictionary, keys will be overridden if the keys are in both. \n</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="sd">        dict2 (dict): Prioritized dictionary, keys will be kept if the keys are in both. \n</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="sd">        sanity (int): The depth to reach before raising an error. \n</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="sd">        dict: dict1 and dict2 merged\n</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a><span class="sd">        RecursionError: if dictionary depth reaches sanity\n</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a><span class="sd">        TypeError: dict1 and dict2 needs to be dictionaries, sanity needs to be an integer\n</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">dict1</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dict2</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sanity</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">((</span><span class="s1">&#39;The function only accepts dictionaries&#39;</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>                    <span class="s1">&#39; as dict1 and dict2 and integer as sanity&#39;</span><span class="p">))</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>    <span class="n">merged</span> <span class="o">=</span> <span class="n">dict1</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>    <span class="n">sanity</span> <span class="o">-=</span> <span class="mi">1</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>    <span class="k">if</span> <span class="n">sanity</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>        <span class="k">raise</span> <span class="ne">RecursionError</span><span class="p">(</span><span class="s1">&#39;Reached depth limit of recursion, aborting&#39;</span><span class="p">)</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">dict2</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">merged</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">merged</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>            <span class="n">merged</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">recursive_merge</span><span class="p">(</span><span class="n">merged</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">value</span><span class="p">,</span> <span class="n">sanity</span><span class="p">)</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>        <span class="k">elif</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">merged</span><span class="p">:</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>            <span class="k">del</span> <span class="n">merged</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>            <span class="n">merged</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>    <span class="k">return</span> <span class="n">merged</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.generic.tolist" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">tolist</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Combine arguments, appending them to a list; args may be scalars or lists. If args is     a list, then the values of the list are appended (not the list itself). </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>*args</code></td>
            <td>
                  <code><autoref identifier="typing.Any" optional hover>Any</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Items to combine. </p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The combined list.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/generic.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="k">def</span><span class="w"> </span><span class="nf">tolist</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">    Combine arguments, appending them to a list; args may be scalars or lists. If args is \</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="sd">    a list, then the values of the list are appended (not the list itself). \n</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">        *args (Any): Items to combine. \n</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">        (list): The combined list. \n</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="n">combined</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>            <span class="n">combined</span> <span class="o">+=</span> <span class="n">i</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>            <span class="n">combined</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>    <span class="k">return</span> <span class="n">combined</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.generic.tolistfromkeys" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">tolistfromkeys</span><span class="p">(</span><span class="n">fromdict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>From a given dict, find all keys and return them within a list. </p>
<p>If found keys are already a list, then extends the return list with the matched value     instead of appending a list within a list. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>fromdict</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary to search within. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>*args</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref> | <autoref identifier="int" optional>int</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keys to find. </p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The list with found key values.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/generic.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="k">def</span><span class="w"> </span><span class="nf">tolistfromkeys</span><span class="p">(</span><span class="n">fromdict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="sd">    From a given dict, find all keys and return them within a list. \n</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="sd">    If found keys are already a list, then extends the return list with the matched value \</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="sd">    instead of appending a list within a list. \n</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="sd">        fromdict (dict): Dictionary to search within. \n</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="sd">        *args (str|int): Keys to find. \n</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="sd">        (list): The list with found key values. \n</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>        <span class="k">if</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">fromdict</span><span class="p">:</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">fromdict</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>            <span class="n">values</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">value</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="p">[</span><span class="n">value</span><span class="p">])</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>    <span class="k">return</span> <span class="n">values</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.generic.touniquelist" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">touniquelist</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Combine arguments while excluding duplicate values. Same functionality as <code>tolist()</code>     only with duplicate values being removed. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>*args</code></td>
            <td>
                  <code><autoref identifier="typing.Any" optional hover>Any</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Items to combine. </p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The combined list with duplicates removed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/generic.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="k">def</span><span class="w"> </span><span class="nf">touniquelist</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">    Combine arguments while excluding duplicate values. Same functionality as `tolist()` \</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">    only with duplicate values being removed. \n</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">        *args (Any): Items to combine. \n</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">        (list): The combined list with duplicates removed. \n</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span class="n">unique_list</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>    <span class="n">_</span> <span class="o">=</span> <span class="p">[</span><span class="n">unique_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tolist</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">unique_list</span><span class="p">]</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span class="k">return</span> <span class="n">unique_list</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="utilshtmlhtmltagfilter"><code>utils.html.HTMLTagFilter</code></h3>
<p>Class used to filter through HTML and remove all tags except for those set as allowed.
Used by the <code>filtertags()</code> template filter.</p>


<div class="doc doc-object doc-module">



<h2 id="sandhill.utils.jsonpath" class="doc doc-heading">
            <code>sandhill.utils.jsonpath</code>


</h2>

    <div class="doc doc-contents first">

      <p>Wrapper functions for JSONPath queries.</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.jsonpath.json_from_url" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">json_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Try to load URL and retrieve JSON data. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>url</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL to retrieve </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An integer timeout in seconds; defaults to 10 if not set </p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref> | <autoref identifier="list" optional>list</autoref> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parsed JSON, or None on failure</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/jsonpath.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="nd">@catch</span><span class="p">(</span><span class="n">RequestException</span><span class="p">,</span> <span class="s2">&quot;JSON API call failed: </span><span class="si">{url}</span><span class="s2"> Exc: </span><span class="si">{exc}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">return_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="nd">@catch</span><span class="p">(</span><span class="n">RequestsConnectionError</span><span class="p">,</span> <span class="s2">&quot;Invalid host for API call: </span><span class="si">{url}</span><span class="s2"> Exc: </span><span class="si">{exc}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">return_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="k">def</span><span class="w"> </span><span class="nf">json_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">    Try to load URL and retrieve JSON data. \n</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="sd">        url (str): The URL to retrieve \n</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="sd">        timeout: An integer timeout in seconds; defaults to 10 if not set \n</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">        (dict|list|None): The parsed JSON, or None on failure \n</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>    <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>        <span class="n">timeout</span> <span class="o">=</span> <span class="mi">10</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">checkers</span><span class="o">.</span><span class="n">is_url</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>        <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot load JSON from invalid URL: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>        <span class="k">if</span> <span class="n">response</span><span class="p">:</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>        <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to retrieve valid response (or timed out): </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.jsonpath.find" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">deepcopy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Get the values for a given JSONPath. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>data</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref> | <autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The JSON data </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>path</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The JSONPath to find </p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of matches, empty if none found</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/jsonpath.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="k">def</span><span class="w"> </span><span class="nf">find</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">deepcopy</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">    Get the values for a given JSONPath. \n</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="sd">        data (dict|list): The JSON data \n</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">        path (str): The JSONPath to find \n</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="sd">        (list): A list of matches, empty if none found \n</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>    <span class="k">if</span> <span class="n">deepcopy</span><span class="p">:</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>        <span class="k">return</span> <span class="n">data</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>    <span class="n">pattern</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>    <span class="n">matches</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">match</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.jsonpath.put" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">put</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">deepcopy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Set a value at the given JSONPath location. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>data</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref> | <autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The JSON data </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>path</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The JSONPath to find </p>
<p>Last element in path will be removed, which must be             a specific Field or Index only </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>value</code></td>
            <td>
                  <code><autoref identifier="any" optional>any</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to set</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref> | <autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The modified JSON data</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/jsonpath.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="k">def</span><span class="w"> </span><span class="nf">put</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">deepcopy</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">    Set a value at the given JSONPath location. \n</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">        data (dict|list): The JSON data \n</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">        path (str): The JSONPath to find \n</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">            Last element in path will be removed, which must be \</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">            a specific Field or Index only \n</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">        value (any): The value to set\n</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="sd">        (dict|list): The modified JSON data \n</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span class="k">if</span> <span class="n">deepcopy</span><span class="p">:</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span class="n">pattern</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">right</span><span class="p">,</span> <span class="n">Fields</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">right</span><span class="p">,</span> <span class="n">Index</span><span class="p">):</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;jsonpath.put can only set specific Fields or Indexes&quot;</span><span class="p">)</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span class="n">matches</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>    <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>        <span class="n">new_value</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>        <span class="n">idxs</span> <span class="o">=</span> <span class="p">[</span><span class="n">pattern</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">index</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">right</span><span class="p">,</span> <span class="n">Index</span><span class="p">)</span> \
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>            <span class="k">else</span> <span class="n">pattern</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">reified_fields</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">idxs</span><span class="p">:</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>            <span class="n">new_value</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>        <span class="n">parse</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">full_path</span><span class="p">))</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">new_value</span><span class="p">)</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.jsonpath.append" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">deepcopy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Append a value to the given JSONPath location. Location must be a list. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>data</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref> | <autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The JSON data </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>path</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The JSONPath to a list(s) </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>value</code></td>
            <td>
                  <code><autoref identifier="any" optional>any</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to append </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref> | <autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The modified JSON data</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/jsonpath.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="k">def</span><span class="w"> </span><span class="nf">append</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">deepcopy</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="sd">    Append a value to the given JSONPath location. Location must be a list. \n</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">        data (dict|list): The JSON data \n</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">        path (str): The JSONPath to a list(s) \n</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="sd">        value (any): The value to append \n</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="sd">        (dict|list): The modified JSON data \n</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>    <span class="k">if</span> <span class="n">deepcopy</span><span class="p">:</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>    <span class="n">pattern</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>    <span class="n">matches</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>    <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>        <span class="n">section</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;jsonpath.append can only do so to a list. &quot;</span> \
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>                             <span class="sa">f</span><span class="s2">&quot;Path &#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39; found type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">section</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="n">section</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>        <span class="n">parse</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">full_path</span><span class="p">))</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">section</span><span class="p">)</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.jsonpath.delete" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">deepcopy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Delete item(s) from JSON data. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>data</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref> | <autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The JSON data </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>path</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The JSONPath to the object(s) to delete </p>
<p>Last element in path will be removed, which must be             a specific Field or Index only </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref> | <autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The modified JSON data</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/jsonpath.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="k">def</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">deepcopy</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="sd">    Delete item(s) from JSON data. \n</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">        data (dict|list): The JSON data \n</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">        path (str): The JSONPath to the object(s) to delete \n</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">            Last element in path will be removed, which must be \</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="sd">            a specific Field or Index only \n</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="sd">        (dict|list): The modified JSON data \n</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>    <span class="k">if</span> <span class="n">deepcopy</span><span class="p">:</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>    <span class="n">pattern</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">right</span><span class="p">,</span> <span class="n">Fields</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">right</span><span class="p">,</span> <span class="n">Index</span><span class="p">):</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;jsonpath.put can only set specific Fields or Indexes&quot;</span><span class="p">)</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>    <span class="n">matches</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>    <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>        <span class="n">new_value</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>        <span class="n">idxs</span> <span class="o">=</span> <span class="p">[</span><span class="n">pattern</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">index</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">right</span><span class="p">,</span> <span class="n">Index</span><span class="p">)</span> \
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>            <span class="k">else</span> <span class="n">pattern</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">reified_fields</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">idxs</span><span class="p">:</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>            <span class="k">del</span> <span class="n">new_value</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>        <span class="n">parse</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">full_path</span><span class="p">))</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">new_value</span><span class="p">)</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.jsonpath.eval_within" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">eval_within</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Given a string containing JSONPath queries, replace the queries with the values they found.</p>
<p>JSONPath queries will query within the context.</p>
<p><strong>Example context</strong> </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="p">{</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="nt">&quot;item&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">        </span><span class="nt">&quot;elem1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;elem2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value1&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nt">&quot;parent&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">        </span><span class="nt">&quot;elem3&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value2&quot;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Example query strings</strong> </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># No given context</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="s2">&quot;$.elem1.elem2&quot;</span>     <span class="c1"># would query the first item in the context dictionary</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="c1"># Specified conext</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="s2">&quot;$parent.elem3&quot;</span>     <span class="c1"># would query the the &quot;parent&quot; key in the context dictionary</span>
</code></pre></div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>string</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The string to search within for JSONPath queries </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>context</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of contexts upon which a JSONPath could query.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/jsonpath.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="k">def</span><span class="w"> </span><span class="nf">eval_within</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="sd">    Given a string containing JSONPath queries, replace the queries with the values they found.\n</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="sd">    JSONPath queries will query within the context.\n</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="sd">    **Example context** \n</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="sd">    ```json</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">    {</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">        &quot;item&quot;: {</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="sd">            &quot;elem1&quot;: { &quot;elem2&quot;: &quot;value1&quot; } }</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="sd">        &quot;parent&quot;: {</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">            &quot;elem3&quot;: &quot;value2&quot; }</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="sd">    }</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="sd">    ``` \n</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="sd">    **Example query strings** \n</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">    # No given context</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">    &quot;$.elem1.elem2&quot;     # would query the first item in the context dictionary</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">    # Specified conext</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="sd">    &quot;$parent.elem3&quot;     # would query the the &quot;parent&quot; key in the context dictionary</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">    ``` \n</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="sd">        string (str): The string to search within for JSONPath queries \n</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">        context (dict): A dictionary of contexts upon which a JSONPath could query. \n</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>        <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;jsonpath.eval_within given invalid/empty context. Skipping.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>        <span class="k">return</span> <span class="n">string</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>    <span class="n">space_esc</span> <span class="o">=</span> <span class="s1">&#39;&amp;&amp;&amp;SPACE&amp;&amp;&amp;&#39;</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>    <span class="c1"># find matching square brackets and replace spaces with placeholder</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>    <span class="n">brackets</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\[.+?\])&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>    <span class="k">for</span> <span class="n">before</span><span class="p">,</span> <span class="n">after</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">brackets</span><span class="p">,</span> <span class="p">[</span><span class="n">bkt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">space_esc</span><span class="p">)</span> <span class="k">for</span> <span class="n">bkt</span> <span class="ow">in</span> <span class="n">brackets</span><span class="p">]):</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>        <span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">after</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>    <span class="n">parts</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\s&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>    <span class="c1"># for vals starting with  $, JSONPath find and replace value with str() of result</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>    <span class="n">jsonpath_pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^\$([a-zA-Z0-9_]+)?\.([^ ]+)$&#39;</span><span class="p">)</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>    <span class="n">context_keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">part</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parts</span><span class="p">):</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">match</span> <span class="o">:=</span> <span class="n">jsonpath_pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="p">)):</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>            <span class="n">ctx_key</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">ctx_key</span><span class="p">:</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>                <span class="n">ctx_key</span> <span class="o">=</span> <span class="n">context_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>            <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;$.</span><span class="si">{</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">space_esc</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">find</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="n">ctx_key</span><span class="p">],</span> <span class="n">path</span><span class="p">)</span> <span class="k">if</span> <span class="n">ctx_key</span> <span class="ow">in</span> <span class="n">context</span> <span class="k">else</span> <span class="p">[]</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>            <span class="c1"># If only one results, then remove it from list</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">result</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">result</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>            <span class="n">parts</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>            <span class="n">parts</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">space_esc</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>    <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">part</span><span class="p">)</span> <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="sandhill.utils.request" class="doc doc-heading">
            <code>sandhill.utils.request</code>


</h2>

    <div class="doc doc-contents first">

      <p>Client request related functions</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.request.match_request_format" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">match_request_format</span><span class="p">(</span><span class="n">view_args_key</span><span class="p">,</span> <span class="n">allowed_formats</span><span class="p">,</span> <span class="n">default_format</span><span class="o">=</span><span class="s1">&#39;text/html&#39;</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Match a request mimetype to the given view_args_key or the allowed mimetypes     provided by client. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>view_args_key</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the key in the url request to check within for             matching format. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>allowed_formats</code></td>
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of acceptable mimetypes. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>default_format</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the mimetype to use by default if view_args_key value is             not allowed. </p>
              </div>
            </td>
            <td>
                  <code>&#39;text/html&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>result_format</code></td>            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the mimetype for the format to return.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/request.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="k">def</span><span class="w"> </span><span class="nf">match_request_format</span><span class="p">(</span><span class="n">view_args_key</span><span class="p">,</span> <span class="n">allowed_formats</span><span class="p">,</span> <span class="n">default_format</span><span class="o">=</span><span class="s1">&#39;text/html&#39;</span><span class="p">):</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="sd">    Match a request mimetype to the given view_args_key or the allowed mimetypes \</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">    provided by client. \n</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">        view_args_key (str|None): the key in the url request to check within for \</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">            matching format. \n</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">        allowed_formats (list): list of acceptable mimetypes. \n</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">        default_format (str): the mimetype to use by default if view_args_key value is \</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="sd">            not allowed. \n</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">        result_format (str): the mimetype for the format to return. \n</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>    <span class="n">result_format</span> <span class="o">=</span> <span class="n">default_format</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>    <span class="c1"># check for accept header</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>    <span class="k">for</span> <span class="n">mtype</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">accept_mimetypes</span><span class="p">):</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>        <span class="k">if</span> <span class="n">mtype</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">:</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>            <span class="n">result_format</span> <span class="o">=</span> <span class="n">mtype</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>            <span class="k">break</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>    <span class="c1"># check for ext; e.g. search.json</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">view_args</span> <span class="ow">and</span> <span class="n">view_args_key</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">view_args</span><span class="p">:</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>        <span class="n">mimetypes</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>        <span class="n">extension</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">request</span><span class="o">.</span><span class="n">view_args</span><span class="p">[</span><span class="n">view_args_key</span><span class="p">]</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>        <span class="k">if</span> <span class="n">extension</span> <span class="ow">in</span> <span class="n">mimetypes</span><span class="o">.</span><span class="n">types_map</span><span class="p">:</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>            <span class="n">result_format</span> <span class="o">=</span> <span class="n">mimetypes</span><span class="o">.</span><span class="n">types_map</span><span class="p">[</span><span class="n">extension</span><span class="p">]</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>    <span class="k">if</span> <span class="n">result_format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">:</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>        <span class="n">abort</span><span class="p">(</span><span class="mi">501</span><span class="p">)</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>    <span class="k">return</span> <span class="n">result_format</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.request.overlay_with_query_args" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">overlay_with_query_args</span><span class="p">(</span><span class="n">query_config</span><span class="p">,</span> <span class="n">request_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">allow_undefined</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Given a query config, overlay request.args on the defaults to generate a combined     list of query arguments </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>query_config</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing rules for query args to parse, each key                              being a query arg name (e.g. "arg_name").</p>
<p>Format for each key as below: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>&quot;arg_name&quot;: {
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    &quot;base&quot;: [&quot;value&quot;]
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>      -- Optional (str | list): value that cannot be changed by request.args; will
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>         always be returned
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    &quot;default&quot;: [&quot;overridable&quot;]
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>      -- Optional (str | list): value which will be replaced by matching
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>         requst.args, if passed
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>}
</code></pre></div>
<p>Either "base" or "default" is required. If appropriate "arg_name" is not passed,             that "arg_name" will be filtered out. If "default" is not set, the request,arg             matching "arg_name" will be filtered out. Both "base" and "default" may be set at             the same time. In this case, only the "default" value will be able to be             overridded by requests.args; the "base" will remain unchanged. </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>request_args</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>allow_undefined</code></td>
            <td>
                  <code><autoref identifier="bool" optional>bool</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, fields not defined in the query_config will be permitted </p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dict of the combined query arguments</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/request.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="k">def</span><span class="w"> </span><span class="nf">overlay_with_query_args</span><span class="p">(</span><span class="n">query_config</span><span class="p">,</span> <span class="n">request_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">allow_undefined</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">    Given a query config, overlay request.args on the defaults to generate a combined \</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="sd">    list of query arguments \n</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">        query_config (dict): A dictionary containing rules for query args to parse, each key \</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">                             being a query arg name (e.g. &quot;arg_name&quot;).\n</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="sd">            Format for each key as below: \n</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="sd">            ```</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">            &quot;arg_name&quot;: {</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">                &quot;base&quot;: [&quot;value&quot;]</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">                  -- Optional (str | list): value that cannot be changed by request.args; will</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">                     always be returned</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">                &quot;default&quot;: [&quot;overridable&quot;]</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">                  -- Optional (str | list): value which will be replaced by matching</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">                     requst.args, if passed</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">            }</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">            ``` \n</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">            Either &quot;base&quot; or &quot;default&quot; is required. If appropriate &quot;arg_name&quot; is not passed, \</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">            that &quot;arg_name&quot; will be filtered out. If &quot;default&quot; is not set, the request,arg \</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">            matching &quot;arg_name&quot; will be filtered out. Both &quot;base&quot; and &quot;default&quot; may be set at \</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">            the same time. In this case, only the &quot;default&quot; value will be able to be \</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">            overridded by requests.args; the &quot;base&quot; will remain unchanged. \n</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="sd">        request_args (dict):</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">        allow_undefined (bool): If True, fields not defined in the query_config will be permitted \n</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="sd">        (dict): A dict of the combined query arguments \n</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span class="c1"># grab the query string params and convert to a flat dict if request args not passed in</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span class="c1"># i.e. duplicative keys will be converted to a list of strings</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="k">if</span> <span class="n">request_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>        <span class="n">request_args</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span class="c1"># avoid modifying incoming args dict and always allow url override (config to be enforced next)</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>    <span class="n">request_args</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">request_args</span><span class="p">)</span> <span class="o">|</span> <span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">flat</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>    <span class="n">query_params</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_conf</span> <span class="ow">in</span> <span class="n">query_config</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>        <span class="n">query_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>        <span class="c1"># Load base from config</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>        <span class="k">if</span> <span class="s1">&#39;base&#39;</span> <span class="ow">in</span> <span class="n">field_conf</span><span class="p">:</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>            <span class="n">query_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_conf</span><span class="p">[</span><span class="s1">&#39;base&#39;</span><span class="p">]</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>        <span class="c1"># Load from request_args</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">request_args</span><span class="p">:</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>            <span class="c1"># Allow override if field defined with a default</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>            <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">in</span> <span class="n">field_conf</span> <span class="ow">and</span> <span class="n">field_conf</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>                <span class="n">query_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">touniquelist</span><span class="p">(</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>                    <span class="n">query_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>                    <span class="n">request_args</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>                <span class="p">)</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>            <span class="c1"># Remove field from request_args having already processed it</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>            <span class="k">del</span> <span class="n">request_args</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>        <span class="c1"># Load default from config if solr_param field not defined in request_args</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>        <span class="k">elif</span> <span class="s1">&#39;default&#39;</span> <span class="ow">in</span> <span class="n">field_conf</span><span class="p">:</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>            <span class="n">query_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">touniquelist</span><span class="p">(</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>                <span class="n">query_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>                <span class="n">field_conf</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>            <span class="p">)</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>        <span class="c1"># Remove field from solr query if empty</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">query_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">]):</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>            <span class="k">del</span> <span class="n">query_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>        <span class="c1"># restrictions</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="c1">#TODO something like: query_params[field_name] = apply_restrictions(</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>        <span class="c1">#    query_params[field_name], field_conf[&#39;restrictions&#39;])</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>        <span class="c1"># Anyone who puts a negative number in rows or (any other non integer) will</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span class="c1"># get what they deserve. &quot;-1&quot; for instance will return the max</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>        <span class="c1"># number of search results.</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>        <span class="k">if</span> <span class="s1">&#39;max&#39;</span> <span class="ow">in</span> <span class="n">field_conf</span><span class="p">:</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>            <span class="n">query_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>                <span class="n">val</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">int</span><span class="p">(</span><span class="n">field_conf</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>                <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">field_conf</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">query_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>            <span class="p">]</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>        <span class="k">if</span> <span class="s1">&#39;min&#39;</span> <span class="ow">in</span> <span class="n">field_conf</span><span class="p">:</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>            <span class="n">query_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>                <span class="n">val</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="n">field_conf</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">])</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>                <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">field_conf</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">query_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>            <span class="p">]</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>    <span class="k">if</span> <span class="n">allow_undefined</span><span class="p">:</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>        <span class="n">query_params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">request_args</span><span class="p">)</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>    <span class="k">return</span> <span class="n">query_params</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="utilssolrsolr"><code>utils.solr.Solr</code></h3>
<p>Class for handling Solr related logic, such as encoding/decoding.</p>


<div class="doc doc-object doc-module">



<h2 id="sandhill.utils.template" class="doc doc-heading">
            <code>sandhill.utils.template</code>


</h2>

    <div class="doc doc-contents first">

      <p>Template and Jinja2 utilities</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.template.evaluate_conditions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">evaluate_conditions</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">match_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Render each conditions' <code>evaluate</code> using the given context; the result must     match a value in the conditions' <code>match_when</code> or none of the conditions' <code>match_when_not</code>. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>conditions</code></td>
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of dict containing keys 'value' and 'allowed' </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ctx</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Context dictionary for template variables </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>match_all</code></td>
            <td>
                  <code><autoref identifier="bool" optional>bool</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If all conditions need to be matched for it to be considered             a match. </p>
<p>Default: True </p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="int" optional>int</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>returns the number of matches matched ONLY if all are matched, else returns 0 </p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="KeyError" optional>KeyError</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>when "match_when"/"match_when_not" or "evaluate" is not in conditions</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/template.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="k">def</span><span class="w"> </span><span class="nf">evaluate_conditions</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">match_all</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="sd">    Render each conditions&#39; `evaluate` using the given context; the result must \</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">    match a value in the conditions&#39; `match_when` or none of the conditions&#39; `match_when_not`. \n</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="sd">        conditions (list): List of dict containing keys &#39;value&#39; and &#39;allowed&#39; \n</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="sd">        ctx (dict): Context dictionary for template variables \n</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="sd">        match_all (bool): If all conditions need to be matched for it to be considered \</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="sd">            a match. \n</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">            Default: True \n</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">        (int): returns the number of matches matched ONLY if all are matched, else returns 0 \n</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">        KeyError: when &quot;match_when&quot;/&quot;match_when_not&quot; or &quot;evaluate&quot; is not in conditions \n</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>    <span class="n">matched</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>    <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">conditions</span><span class="p">:</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>        <span class="c1"># Idea: use boosts if the matched value for 2 config files is the same,</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>        <span class="c1"># e.g. matched += boost</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>        <span class="n">check_value</span> <span class="o">=</span> <span class="n">render_template_string</span><span class="p">(</span><span class="n">match</span><span class="p">[</span><span class="s1">&#39;evaluate&#39;</span><span class="p">],</span> <span class="n">ctx</span><span class="p">)</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;match_when&#39;</span><span class="p">,</span> <span class="s1">&#39;match_when_not&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">match</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">or</span> \
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>            <span class="p">{</span><span class="s1">&#39;match_when&#39;</span><span class="p">,</span> <span class="s1">&#39;match_when_not&#39;</span><span class="p">}</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">keys</span><span class="p">())):</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>                <span class="s2">&quot;One (and only one) of the keys &#39;match_when&#39; or &#39;match_when_not&#39; must be present&quot;</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>            <span class="p">)</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>        <span class="k">if</span> <span class="s1">&#39;match_when&#39;</span> <span class="ow">in</span> <span class="n">match</span> <span class="ow">and</span> <span class="n">check_value</span> <span class="ow">in</span> <span class="n">match</span><span class="p">[</span><span class="s1">&#39;match_when&#39;</span><span class="p">]:</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>            <span class="n">matched</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>        <span class="k">elif</span> <span class="s1">&#39;match_when_not&#39;</span> <span class="ow">in</span> <span class="n">match</span> <span class="ow">and</span> <span class="n">check_value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">match</span><span class="p">[</span><span class="s1">&#39;match_when_not&#39;</span><span class="p">]:</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>            <span class="n">matched</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>    <span class="c1"># Only assigned matched value if ALL matches are successful</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>    <span class="k">return</span> <span class="n">matched</span> <span class="k">if</span> <span class="n">matched</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">match_all</span> <span class="k">else</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.template.render_template_json" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">render_template_json</span><span class="p">(</span><span class="n">json_obj</span><span class="p">,</span> <span class="n">ctx</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Serialize a JSON, render it as a template, then convert back to JSON </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>json_obj</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref> | <autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>JSON represented in Python </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ctx</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Context for the jinja template </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref> | <autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated JSON structure </p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="json.JSONDecodeError" optional hover>JSONDecodeError</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the resulting templace is unable to be parsed as JSON</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/template.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="k">def</span><span class="w"> </span><span class="nf">render_template_json</span><span class="p">(</span><span class="n">json_obj</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">    Serialize a JSON, render it as a template, then convert back to JSON \n</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">        json_obj (dict|list): JSON represented in Python \n</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">        ctx (dict): Context for the jinja template \n</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">        (dict|list): The updated JSON structure \n</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">        json.JSONDecodeError: If the resulting templace is unable to be parsed as JSON \n</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span class="c1"># Disable autoescape for JSON output to avoid HTML entities being injected</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>    <span class="n">rendered</span> <span class="o">=</span> <span class="n">render_template_string</span><span class="p">(</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>        <span class="s2">&quot;{</span><span class="si">% a</span><span class="s2">utoescape false -%}&quot;</span> <span class="o">+</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json_obj</span><span class="p">)</span> <span class="o">+</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>        <span class="s2">&quot;{</span><span class="si">%- e</span><span class="s2">ndautoescape %}&quot;</span><span class="p">,</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>        <span class="n">ctx</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span class="p">)</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">rendered</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.template.render_template_string" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">render_template_string</span><span class="p">(</span><span class="n">template_str</span><span class="p">,</span> <span class="n">ctx</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Renders Jinja templates with added Sandhill filters/context processors. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>template_str</code></td>
            <td>
                  <code><autoref identifier="string" optional>string</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>jinja template variable </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ctx</code></td>
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Context for the jinja template </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The rendered template as a string. </p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="jinja2.TemplateError" optional hover>TemplateError</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>On invalid template.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/template.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="k">def</span><span class="w"> </span><span class="nf">render_template_string</span><span class="p">(</span><span class="n">template_str</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="sd">    Renders Jinja templates with added Sandhill filters/context processors. \n</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">        template_str (string): jinja template variable \n</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">        ctx (dict): Context for the jinja template \n</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">        (str): The rendered template as a string. \n</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">        jinja2.TemplateError: On invalid template. \n</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>    <span class="k">with</span> <span class="n">context</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>        <span class="k">return</span> <span class="n">flask</span><span class="o">.</span><span class="n">render_template_string</span><span class="p">(</span><span class="n">template_str</span><span class="p">,</span> <span class="o">**</span><span class="n">ctx</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="sandhill.utils.test" class="doc doc-heading">
            <code>sandhill.utils.test</code>


</h2>

    <div class="doc doc-contents first">

      <p>Dummy functions for use in unit tests.</p>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="sandhill.utils.xml" class="doc doc-heading">
            <code>sandhill.utils.xml</code>


</h2>

    <div class="doc doc-contents first">

      <p>XML loading and handling functionality.</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.xml.load" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">etree</span><span class="o">.</span><span class="n">_Element</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Load an XML document. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>source</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>XML source. Either path, url, string, or loaded LXML Element </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An integer timeout in seconds; defaults to 10 if not set</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Returns:
    Loaded XML object tree, or None on invalid source or timeout</p>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/xml.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="nd">@catch</span><span class="p">(</span><span class="n">etree</span><span class="o">.</span><span class="n">XMLSyntaxError</span><span class="p">,</span> <span class="s2">&quot;Invalid XML source: </span><span class="si">{source}</span><span class="s2"> Exc: </span><span class="si">{exc}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">return_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="nd">@catch</span><span class="p">(</span><span class="n">RequestException</span><span class="p">,</span> <span class="s2">&quot;XML API call failed: </span><span class="si">{source}</span><span class="s2"> Exc: </span><span class="si">{exc}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">return_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="nd">@catch</span><span class="p">(</span><span class="n">RequestsConnectionError</span><span class="p">,</span> <span class="s2">&quot;Invalid host in XML call: </span><span class="si">{source}</span><span class="s2"> Exc: </span><span class="si">{exc}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">return_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">etree</span><span class="o">.</span><span class="n">_Element</span><span class="p">:</span> <span class="c1"># pylint: disable=protected-access</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="sd">    Load an XML document. \n</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">        source: XML source. Either path, url, string, or loaded LXML Element \n</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">        timeout: An integer timeout in seconds; defaults to 10 if not set</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="sd">        Loaded XML object tree, or None on invalid source or timeout \n</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>    <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>        <span class="n">timeout</span> <span class="o">=</span> <span class="mi">10</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>        <span class="c1"># pylint: disable=protected-access</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>        <span class="k">return</span> <span class="n">source</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">etree</span><span class="o">.</span><span class="n">_ElementTree</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>    <span class="n">source</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>    <span class="k">if</span> <span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">):</span>           <span class="c1"># Handle source as bytes</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>        <span class="n">source</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>    <span class="k">elif</span> <span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">:</span>              <span class="c1"># Handle source as string</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>        <span class="n">source</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>    <span class="k">elif</span> <span class="n">checkers</span><span class="o">.</span><span class="n">is_file</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>      <span class="c1"># Handle source as local file</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>        <span class="k">pass</span>  <span class="c1"># etree.parse handles local file paths natively</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>    <span class="k">elif</span> <span class="n">checkers</span><span class="o">.</span><span class="n">is_url</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>       <span class="c1"># Handle source as URL</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="p">:</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>            <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to retrieve XML URL (or timed out): </span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>        <span class="n">source</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>        <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;XML source is not valid file, URL, or XML string. </span><span class="si">{</span><span class="n">source</span><span class="p">[:</span><span class="mi">40</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>                           <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">40</span><span class="p">)</span> <span class="o">*</span> <span class="s1">&#39;...&#39;</span><span class="p">)</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="k">return</span> <span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.xml.xpath" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">xpath</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Retrieve the matching xpath content from an XML source </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>query</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>XPath query to match against </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>source</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>XML source. Either path, url, or string </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="list" optional>list</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Matching results from XPath query, or None on failure</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/xml.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="nd">@catch</span><span class="p">(</span><span class="n">etree</span><span class="o">.</span><span class="n">XPathEvalError</span><span class="p">,</span> <span class="s2">&quot;Invalid XPath query </span><span class="si">{query}</span><span class="s2"> Exc </span><span class="si">{exc}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">return_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="k">def</span><span class="w"> </span><span class="nf">xpath</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">    Retrieve the matching xpath content from an XML source \n</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">        query (str): XPath query to match against \n</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">        source: XML source. Either path, url, or string \n</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">        Matching results from XPath query, or None on failure \n</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>    <span class="n">doc</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>    <span class="k">return</span> <span class="n">doc</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="n">doc</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span><span class="o">.</span><span class="n">nsmap</span><span class="p">)</span> <span class="k">if</span> <span class="n">doc</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sandhill.utils.xml.xpath_by_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">xpath_by_id</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>For the matching xpath content, organize into dict with key     being the id param of the matched tags. Elements without an id attribute     will not be returned. </p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>query</code></td>
            <td>
                  <code><autoref identifier="str" optional>str</autoref></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>XPath query to match against </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>source</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>XML source. Either path, url, or string </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><autoref identifier="dict" optional>dict</autoref> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict mapping with keys of id, and values of content within                      matching elements, or None on failure</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>sandhill/utils/xml.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="k">def</span><span class="w"> </span><span class="nf">xpath_by_id</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">    For the matching xpath content, organize into dict with key \</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">    being the id param of the matched tags. Elements without an id attribute \</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="sd">    will not be returned. \n</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="sd">        query (str): XPath query to match against \n</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="sd">        source: XML source. Either path, url, or string \n</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="sd">        (dict|None): Dict mapping with keys of id, and values of content within \</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="sd">                     matching elements, or None on failure \n</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="sd">    &#39;&#39;&#39;</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>    <span class="n">matched</span> <span class="o">=</span> <span class="n">xpath</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span class="k">if</span> <span class="n">matched</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># Explicit check to avoid empty results being matched</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>    <span class="n">idmap</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>    <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matched</span><span class="p">:</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>        <span class="k">if</span> <span class="s1">&#39;id&#39;</span> <span class="ow">in</span> <span class="n">match</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>            <span class="n">text</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="n">match</span><span class="o">.</span><span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>            <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">match</span><span class="o">.</span><span class="n">iterchildren</span><span class="p">():</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>                <span class="n">text</span> <span class="o">+=</span> <span class="n">etree</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;unicode&#39;</span><span class="p">)</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>            <span class="n">text</span> <span class="o">+=</span> <span class="n">match</span><span class="o">.</span><span class="n">tail</span> <span class="k">if</span> <span class="n">match</span><span class="o">.</span><span class="n">tail</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>            <span class="n">idmap</span><span class="p">[</span><span class="n">match</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="n">text</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>    <span class="k">return</span> <span class="n">idmap</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="bootstrap">Bootstrap</h2>
<p>This is the code that starts up Sandhill, initializing the application.
Have a look at the <a href="../bootstrap/">bootstrap</a> documentation for more details.</p>
<h3 id="bootstrap_1"><code>bootstrap</code></h3>
<p>The core of the bootstrap module handles, among other things, loading other Python code.</p>
<h3 id="bootstraprequest"><code>bootstrap.request</code></h3>


<div class="doc doc-object doc-function">




    <div class="doc doc-contents first">

      <p>Standard changes Sandhill makes to the default Flask <code>request</code> object.</p>
<p>Specifically, it:</p>
<ul>
<li>Adds <code>query_args</code>, a normal Python dictionary with args as keys.</li>
</ul>

    </div>

</div><h3 id="bootstrapg"><code>bootstrap.g</code></h3>


<div class="doc doc-object doc-function">




    <div class="doc doc-contents first">

      <p>Standard changes Sandhill makes to the default Flask <code>g</code> object.</p>
<p>Specifically, it:</p>
<ul>
<li>Adds <code>instance_path</code> available in <code>g</code> object.</li>
</ul>

    </div>

</div><h3 id="bootstrapdebugtoolbar"><code>bootstrap.debugtoolbar</code></h3>


<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">

      <p>Bootstrap hook to add FlaskDebugToolbar to the Flaks application when debug mode is enabled.</p>



  <div class="doc doc-children">











  </div>

    </div>

</div><h3 id="bootstrapdisable_debug_caching"><code>bootstrap.disable_debug_caching</code></h3>


<div class="doc doc-object doc-function">


<h2 id="sandhill.bootstrap.disable_debug_caching.disable_browser_cache" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sandhill</span><span class="o">.</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">disable_debug_caching</span><span class="o">.</span><span class="n">disable_browser_cache</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents first">

      <p>Adds headers to disable browser caching when app is in debug mode.</p>

            <details class="quote">
              <summary>Source code in <code>sandhill/bootstrap/disable_debug_caching.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="nd">@app</span><span class="o">.</span><span class="n">after_request</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="k">def</span><span class="w"> </span><span class="nf">disable_browser_cache</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds headers to disable browser caching when app is in debug mode.&quot;&quot;&quot;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>    <span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>        <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Cache-Control&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;no-cache, no-store, must-revalidate&quot;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>        <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Pragma&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;no-cache&quot;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>        <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Expires&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>    <span class="k">return</span> <span class="n">response</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.instant"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>