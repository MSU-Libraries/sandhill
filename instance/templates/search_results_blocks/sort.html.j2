<form method="GET" action="{{ url_components["path"] }}" class="col-12 col-md-6">
    {% for param, values in url_components["query_args"].items() %}
        {% if param not in ["sort", "start"] %}
            {% for value in values %}
                <input type="hidden" name="{{ param }}" value="{{ value }}"/>
            {% endfor %}
        {% endif %}
    {% endfor %}
    <div class="input-group">
        <select class="custom-select" name="sort" aria-label="Sort the search results">
        {% for sort_opt in search_conf.sort_options %}
            {% if 'sort' in url_components.query_args and url_components.query_args['sort'] | head == sort_opt['value'] %}
                <option selected value="{{ sort_opt['value'] }}">{{ sort_opt['label'] }}</option>
            {% else %}
                <option value="{{ sort_opt['value'] }}">{{ sort_opt['label'] }}</option>
            {% endif %}
        {% endfor %}
        </select>
        <div class="input-group-append">
            <button class="btn btn-outline-secondary" type="submit">Apply</button>
        </div>
    </div>
</form>
